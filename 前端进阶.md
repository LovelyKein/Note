# äº‹ä»¶å¾ªç¯`EventLoop`



## æµè§ˆå™¨è¿›ç¨‹æ¨¡å‹

### ä½•ä¸ºè¿›ç¨‹ï¼Ÿ

![image-20250506193049120](./assets/image-20250506193049120.png)

ç¨‹åºè¿è¡Œéœ€è¦æœ‰å®ƒè‡ªå·±ä¸“å±çš„å†…å­˜ç©ºé—´ï¼Œå¯ä»¥æŠŠè¿™å—å†…å­˜ç©ºé—´ç®€å•çš„ç†è§£ä¸ºè¿›ç¨‹
æ¯ä¸ªåº”ç”¨è‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿›ç¨‹ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œå³ä½¿è¦é€šä¿¡ï¼Œä¹Ÿéœ€è¦åŒæ–¹åŒæ„

### ä½•ä¸ºçº¿ç¨‹ï¼Ÿ

![image-20250506193518916](./assets/image-20250506193518916.png)

æœ‰äº†è¿›ç¨‹åï¼Œå°±å¯ä»¥è¿è¡Œç¨‹åºçš„ä»£ç äº†ï¼Œè¿è¡Œä»£ç çš„ã€Œäººã€ç§°ä¹‹ä¸ºã€Œçº¿ç¨‹ã€
**ä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹**ï¼Œæ‰€ä»¥åœ¨è¿›ç¨‹å¼€å¯åä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªä¸ªçº¿ç¨‹æ¥è¿è¡Œä»£ç ï¼Œè¯¥çº¿ç¨‹ç§°ä¹‹ä¸º**ä¸»çº¿ç¨‹**
å¦‚æœç¨‹åºéœ€è¦åŒæ—¶æ‰§è¡Œå¤šå—ä»£ç ï¼Œä¸»çº¿ç¨‹å°±ä¼šå¯åŠ¨æ›´å¤šçš„çº¿å’Œç¨‹æ¥æ‰§è¡Œä»£ç 
ä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹

### æµè§ˆå™¨æœ‰å“ªäº›è¿›ç¨‹å’Œçº¿ç¨‹?

æµè§ˆå™¨æ˜¯ä¸€ä¸ªå¤šè¿›ç¨‹å¤šçº¿ç¨‹çš„åº”ç”¨ç¨‹åº
ä¸ºäº†é¿å…ç›¸äº’å½±å“,ä¸ºäº†å‡å°‘è¿ç¯å´©æºƒçš„å‡ ç‡,å½“å¯åŠ¨æµè§ˆå™¨å,å®ƒä¼šè‡ªåŠ¨å¯åŠ¨å¤šä¸ªè¿›ç¨‹

![image-20250506193940766](./assets/image-20250506193940766.png)

æµè§ˆå™¨æœ€ä¸»è¦çš„è¿›ç¨‹æœ‰ï¼š

- æµè§ˆå™¨è¿›ç¨‹

  ä¸»è¦è´Ÿè´£ç•Œé¢æ˜¾ç¤ºã€ç”¨æˆ·äº¤äº’ã€å­è¿›ç¨‹ç®¡ç†ç­‰ã€‚æµè§ˆå™¨è¿›ç¨‹å†…éƒ¨ä¼šå¯åŠ¨å¤šä¸ªçº¿ç¨‹å¤„ç†ä¸åŒçš„ä»»åŠ¡

- ç½‘ç»œè¿›ç¨‹

  è´Ÿè´£åŠ è½½ç½‘ç»œèµ„æºï¼›ç½‘ç»œè¿›ç¨‹å†…éƒ¨ä¼šå¯åŠ¨å¤šä¸ªçº¿ç¨‹æ¥å¤„ç†ä¸åŒçš„ç½‘ç»œä»»åŠ¡

- æ¸²æŸ“è¿›ç¨‹ï¼ˆä¸»è¦ï¼‰

  æ¸²æŸ“è¿›ç¨‹å¯åŠ¨åï¼Œä¼šå¼€å¯ä¸€ä¸ªæ¸²æŸ“ä¸»çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹è´Ÿè´£æ‰§è¡Œ`HTMLã€CSSã€JS`ä»£ç 
  é»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¼šä¸ºæ¯ä¸ªæ ‡ç­¾é¡µå¼€å¯ä¸€ä¸ªæ–°çš„æ¸²æŸ“è¿›ç¨‹,ä»¥ä¿è¯ä¸åŒçš„æ ‡ç­¾é¡µä¹‹é—´ä¸ç›¸äº’å½±å“

## æ¸²æŸ“ä¸»çº¿ç¨‹å¦‚ä½•å·¥ä½œï¼Ÿ

è¦å¤„ç†å¤§é‡çš„çš„ä»»åŠ¡,ä¸»çº¿ç¨‹é‡åˆ°äº†ä¸€ä¸ªå‰æ‰€æœªæœ‰çš„éš¾é¢˜ï¼šå¦‚ä½•è°ƒåº¦ä»»åŠ¡?
æ¸²æŸ“ä¸»çº¿ç¨‹æƒ³å‡ºäº†ä¸€ä¸ªç»å¦™çš„ä¸»æ„æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼šæ’é˜Ÿ

![image-20250506195951774](./assets/image-20250506195951774.png)

1. åœ¨æœ€å¼€å§‹çš„æ—¶å€™ï¼Œæ¸²æŸ“ä¸»çº¿ç¨‹ä¼šè¿›å…¥ä¸€ä¸ªæ— é™å¾ªç¯
2.  ç¬¬ä¸€æ¬¡å¾ªç¯ä¼šæ£€æŸ¥æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ˜¯å¦å­˜åœ¨ä»»åŠ¡ï¼›å¦‚æœæœ‰ï¼Œå°±å–å‡ºç¬¬ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œï¼Œæ‰§è¡Œå®Œä¸€ä¸ªåè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯
   å¦‚æœæ²¡æœ‰ï¼Œåˆ™è¿›å…¥ä¼‘çœ çŠ¶æ€
3. å…¶ä»–æ‰€æœ‰çº¿ç¨‹ (åŒ…æ‹¬å…¶ä»–è¿›ç¨‹çš„çº¿ç¨‹) å¯ä»¥éšæ—¶å‘æ¶ˆæ¯é˜Ÿåˆ—æ·»åŠ ä»»åŠ¡
   æ–°ä»»åŠ¡ä¼šåŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—çš„æœ«å°¾ï¼Œåœ¨æ·»åŠ æ–°ä»»åŠ¡æ—¶
   å¦‚æœä¸»çº¿ç¨‹æ˜¯ä¼‘çœ çŠ¶æ€ï¼Œåˆ™ä¼šå°†å…¶å”¤é†’ä»¥ç»§ç»­å¾ªç¯æ‹¿å–ä»»åŠ¡

è¿™æ ·ä¸€æ¥ï¼Œå°±å¯ä»¥è®©æ¯ä¸ªä»»åŠ¡æœ‰æ¡ä¸ç´Šçš„ã€æŒç»­çš„è¿›è¡Œä¸‹å»äº†
æ•´ä¸ªè¿‡ç¨‹ï¼Œè¢«ç§°ä¹‹ä¸º**äº‹ä»¶å¾ªç¯ (æ¶ˆæ¯å¾ªç¯)**ï¼›

## ä½•ä¸ºå¼‚æ­¥ï¼Ÿ

ä»£ç åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­,ä¼šé‡åˆ°ä¸€äº›æ— æ³•ç«‹å³å¤„ç†çš„ä»»åŠ¡ï¼Œæ¯”å¦‚ï¼š

- è®¡æ—¶å®Œæˆåéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ --`setTimeoutã€setinterval`
- ç½‘ç»œé€šä¿¡å®Œæˆåéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ --`XHRã€Fetch`
- ç”¨æˆ·æ“ä½œåéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ --`addEventListener`

å¦‚æœè®©æ¸²æŸ“ä¸»çº¿ç¨‹ç­‰å¾…è¿™äº›ä»»åŠ¡çš„æ—¶æœºè¾¾åˆ°ï¼Œå°±ä¼šå¯¼è‡´ä¸»çº¿ç¨‹é•¿æœŸå¤„äºã€Œé˜»å¡ã€çš„çŠ¶æ€ï¼Œä»è€Œå¯¼è‡´æµè§ˆå™¨ã€Œå¡æ­»ã€

![image-20250507105222984](./assets/image-20250507105222984.png)

æ¸²æŸ“ä¸»çº¿ç¨‹æ‰¿æ‹…ç€æå…¶é‡è¦çš„å·¥ä½œï¼Œæ— è®ºå¦‚ä½•éƒ½ä¸èƒ½é˜»å¡ï¼
å› æ­¤ï¼Œæµè§ˆå™¨é€‰æ‹©**å¼‚æ­¥**æ¥è§£å†³è¿™ä¸ªé—®é¢˜

![image-20250507105859557](./assets/image-20250507105859557.png)

ä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼ï¼Œ**æ¸²æŸ“ä¸»çº¿ç¨‹æ°¸ä¸é˜»å¡**

```js
// é¢è¯•é¢˜ï¼šå¦‚ä½•ç†è§£ JS çš„å¼‚æ­¥ï¼Ÿ

å‚è€ƒç­”æ¡ˆï¼š
JS æ˜¯ä¸€é—¨å•çº¿ç¨‹çš„è¯­è¨€ï¼Œè¿™æ˜¯å› ä¸ºå®ƒè¿è¡Œåœ¨æµè§ˆå™¨çš„æ¸²æŸ“ä¸»çº¿ç¨‹ä¸­,è€Œæ¸²æŸ“ä¸»çº¿ç¨‹åªæœ‰ä¸€ä¸ª
è€Œæ¸²æŸ“ä¸»çº¿ç¨‹æ‰¿æ‹…ç€è¯¸å¤šçš„å·¥ä½œï¼Œæ¸²æŸ“é¡µé¢ã€æ‰§è¡ŒJSéƒ½åœ¨å…¶ä¸­è¿è¡Œ
å¦‚æœä½¿ç”¨åŒæ­¥çš„æ–¹å¼ï¼Œå°±ææœ‰å¯èƒ½å¯¼è‡´ä¸»çº¿ç¨‹äº§ç”Ÿé˜»å¡ï¼Œä»è€Œå¯¼è‡´æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„å¾ˆå¤šå…¶ä»–ä»»åŠ¡æ— æ³•å¾—åˆ°æ‰§è¡Œ
è¿™æ ·ä¸€æ¥,ä¸€æ–¹é¢ä¼šå¯¼è‡´ç¹å¿™çš„ä¸»çº¿ç¨‹ç™½ç™½çš„æ¶ˆè€—æ—¶é—´ï¼Œå¦ä¸€æ–¹é¢å¯¼è‡´é¡µé¢æ— æ³•åŠæ—¶æ›´æ–°,ç»™ç”¨æˆ·é€ æˆå¡æ­»ç°è±¡

æ‰€ä»¥æµè§ˆå™¨é‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼æ¥é¿å…ï¼Œå…·ä½“åšæ³•æ˜¯å½“æŸäº›ä»»åŠ¡å‘ç”Ÿæ—¶,æ¯”å¦‚è®¡æ—¶å™¨ã€ç½‘ç»œã€äº‹ä»¶ç›‘å¬,ä¸»çº¿ç¨‹å°†ä»»åŠ¡äº¤ç»™å…¶ä»–çº¿ç¨‹å»å¤„ç†
è‡ªèº«ç«‹å³ç»“æŸä»»åŠ¡çš„æ‰§è¡Œï¼Œè½¬è€Œæ‰§è¡Œåç»­ä»£ç 
å½“å…¶ä»–çº¿ç¨‹å®Œæˆæ—¶ï¼Œå°†äº‹å…ˆä¼ é€’çš„å›è°ƒå‡½æ•°åŒ…è£…æˆä»»åŠ¡ï¼ŒåŠ å…¥åˆ° æ¶ˆæ¯é˜Ÿåˆ— çš„æœ«å°¾æ’é˜Ÿï¼Œç­‰å¾…ä¸»çº¿ç¨‹è°ƒåº¦æ‰§è¡Œ
```

## ä»»åŠ¡æœ‰ä¼˜å…ˆçº§å—?

**ä»»åŠ¡æ²¡æœ‰ä¼˜å…ˆçº§ï¼Œåœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­å…ˆè¿›å…ˆå‡º**
**ä½†æ¶ˆæ¯é˜Ÿåˆ—æ˜¯æœ‰ä¼˜å…ˆçº§çš„**

```js
// æ ¹æ®W3Cçš„æœ€æ–°è§£é‡Šï¼š
1. æ¯ä¸ªä»»åŠ¡éƒ½æœ‰ä¸€ä¸ªä»»åŠ¡ç±»å‹ï¼ŒåŒä¸€ä¸ªç±»å‹çš„ä»»åŠ¡å¿…é¡»åœ¨ä¸€ä¸ªé˜Ÿåˆ—ï¼Œä¸åŒç±»å‹çš„ä»»åŠ¡å¯ä»¥åˆ†å±äºä¸åŒçš„é˜Ÿåˆ—
2. åœ¨ä¸€æ¬¡äº‹ä»¶å¾ªç¯ä¸­ï¼Œæµè§ˆå™¨å¯ä»¥æ ¹æ®å®é™…æƒ…å†µä»ä¸åŒçš„é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡æ‰§è¡Œ
3. æµè§ˆå™¨å¿…é¡»å‡†å¤‡å¥½ä¸€ä¸ªå¾®é˜Ÿåˆ—ï¼Œå¾®é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¼˜å…ˆæ‰€æœ‰å…¶ä»–ä»»åŠ¡æ‰§è¡Œ
// https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint
```

åœ¨ç›®å‰ Chrome çš„å®ç°ä¸­ï¼Œè‡³å°‘åŒ…å«äº†ä¸‹é¢çš„é˜Ÿåˆ—ï¼š

- å»¶æ—¶é˜Ÿåˆ—ï¼šç”¨äºå­˜æ”¾è®¡æ—¶å™¨åˆ°è¾¾åçš„å›è°ƒä»»åŠ¡ï¼Œä¼˜å…ˆçº§ã€ä¸­ã€‘
- äº¤äº’é˜Ÿåˆ—ï¼šç”¨äºå­˜æ”¾ç”¨æˆ·æ“ä½œåäº§ç”Ÿçš„äº‹ä»¶å¤„ç†ä»»åŠ¡ï¼Œä¼˜å…ˆçº§ã€é«˜ã€‘
- å¾®é˜Ÿåˆ—ï¼šç”¨æˆ·å­˜æ”¾éœ€è¦æœ€å¿«æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¼˜å…ˆçº§ã€æœ€é«˜ã€‘

æ·»åŠ ä»»åŠ¡åˆ°å¾®é˜Ÿåˆ—çš„ä¸»è¦æ–¹å¼ä¸»è¦æ˜¯ä½¿ç”¨`Promiseã€MutationObserver`

```js
// ç«‹å³æŠŠä¸€ä¸ªå‡½æ•°æ·»åŠ åˆ°å¾®é˜Ÿåˆ—
Promise.resolve().then(å‡½æ•°)
```

**å•çº¿ç¨‹æ˜¯å¼‚æ­¥äº§ç”Ÿçš„åŸå› ï¼Œäº‹ä»¶å¾ªç¯æ˜¯å¼‚æ­¥çš„å®ç°æ–¹å¼**

> [!NOTE]
>
> å®ä»»åŠ¡`macro task`ï¼š`setTimeout`ã€`setInterval`ã€`requestAnimationFrame`ã€äº‹ä»¶å¤„ç†å‡½æ•°
>
> å¾®ä»»åŠ¡`micro task`ï¼š`Promise`çš„`.then()`å‡½æ•°å›è°ƒ

> [!IMPORTANT]
>
> `Promise(() => { ä»£ç  })`é‡Œçš„ä»£ç æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œ`.then(callback)`çš„å›è°ƒæ‰æ˜¯å¼‚æ­¥çš„ï¼Œå°†`callback`æ”¾è¿›å¾®é˜Ÿåˆ—
>
> `resolve()`å’Œ`reject()`åé¢çš„ä»£ç ä¾æ—§ä¼šè¿è¡Œï¼Œåªæ˜¯ä¸ä¼šæ›´æ”¹ä»»åŠ¡çš„çŠ¶æ€å’Œæ•°æ®



# æµè§ˆå™¨å¦‚ä½•æ¸²æŸ“é¡µé¢ï¼Ÿ

å½“æµè§ˆå™¨çš„ç½‘ç»œçº¿ç¨‹æ”¶åˆ°HTMLæ–‡æ¡£åï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæ¸²æŸ“ä»»åŠ¡ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™æ¸²æŸ“ä¸»çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—
åœ¨äº‹ä»¶å¾ªç¯æœºåˆ¶çš„ä½œç”¨ä¸‹ï¼Œæ¸²æŸ“ä¸»çº¿ç¨‹å–å‡ºæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¸²æŸ“ä»»åŠ¡ï¼Œå¼€å¯æ¸²æŸ“æµç¨‹

![image-20250507154541782](./assets/image-20250507154541782.png)

æ¯ä¸ªé˜¶æ®µéƒ½æœ‰æ˜ç¡®çš„è¾“å…¥è¾“å‡ºï¼Œä¸Šä¸€ä¸ªé˜¶æ®µçš„è¾“å‡ºä¼šæˆä¸ºä¸‹ä¸€ä¸ªé˜¶æ®µçš„è¾“å…¥
è¿™æ ·ï¼Œæ•´ä¸ªæ¸²æŸ“æµç¨‹å°±å½¢æˆäº†ä¸€å¥—ç»„ç»‡ä¸¥å¯†çš„ç”Ÿäº§æµæ°´çº¿



## è§£æ HTML

è§£æè¿‡ç¨‹ä¸­é‡åˆ°CSSè§£æCSS
ä¸ºäº†æé«˜è§£ææ•ˆç‡ï¼Œæµè§ˆå™¨åœ¨å¼€å§‹è§£æå‰ä¼šå¯åŠ¨ä¸€ä¸ª**é¢„è§£æçš„çº¿ç¨‹**ï¼Œç‡å…ˆä¸‹è½½HTMLä¸­çš„å¤–éƒ¨CSSæ–‡ä»¶å’Œå¤–éƒ¨çš„JSæ–‡ä»¶
å¦‚æœä¸»çº¿ç¨‹è§£æåˆ°Linkæ ‡ç­¾ä½ç½®ï¼Œæ­¤æ—¶å¤–éƒ¨çš„CSSæ–‡ä»¶è¿˜æ²¡æœ‰ä¸‹è½½è§£æå¥½ï¼Œä¸»çº¿ç¨‹ä¸ä¼šç­‰å¾…ï¼Œç»§ç»­è§£æåç»­çš„HTML
è¿™æ˜¯å› ä¸ºä¸‹è½½å’Œè§£æCSSçš„å·¥ä½œæ˜¯åœ¨é¢„è§£æçº¿ç¨‹ä¸­è¿›è¡Œçš„ï¼Œè¿™å°±æ˜¯CSSä¸ä¼šé˜»å¡HTMLè§£æçš„æ ¹æœ¬åŸå› 

![image-20250507171449270](./assets/image-20250507171449270.png)

å¦‚æœä¸»çº¿ç¨‹è§£æåˆ°scriptä½ç½®ï¼Œä¼šåœæ­¢è§£æHTMLï¼Œè½¬è€Œç­‰å¾…JSæ–‡ä»¶ä¸‹è½½å¥½ï¼Œå¹¶å°†å…¨å±€ä»£ç è§£ææ‰§è¡Œå®Œæˆåï¼Œæ‰èƒ½ç»§ç»­è§£æHTML
è¿™æ˜¯å› ä¸ºJSä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¯èƒ½ä¼šä¿®æ”¹å½“å‰çš„DOMæ ‘ï¼Œæ‰€ä»¥DOMæ ‘çš„ç”Ÿæˆå¿…é¡»æš‚åœ
è¿™å°±æ˜¯JSä¼šé˜»å¡HTMLè§£æçš„æ ¹æœ¬åŸå› 

![image-20250507172150605](./assets/image-20250507172150605.png)

HTMLè§£æå®Œæˆåï¼Œä¼šå¾—åˆ°DOMæ ‘å’ŒCSSOMæ ‘ï¼Œæµè§ˆå™¨çš„é»˜è®¤æ ·å¼ã€å†…éƒ¨æ ·å¼ã€å¤–éƒ¨æ ·å¼ã€è¡Œå†…æ ·å¼å‡ä¼šåŒ…å«åœ¨CSSOMæ ‘ä¸­

## æ ·å¼è®¡ç®—

æ¸²æŸ“ä¸»çº¿ç¨‹ä¼šéå†å¾—åˆ°çš„DOMæ ‘ï¼Œä¾æ¬¡ä¸ºæ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹è®¡ç®—å‡ºå®ƒæœ€ç»ˆæ ·å¼,ç§°ä¹‹ä¸º`ComputedStyle`
åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šé¢„è®¾å€¼ä¼šå˜æˆç»å¯¹å€¼ï¼Œæ¯”å¦‚redä¼šå˜æˆrgb(255,0,0)ï¼Œç›¸å¯¹å•ä½ä¼šå˜æˆç»å¯¹å•ä½ï¼Œæ¯”å¦‚emä¼šå˜æˆpx
è¿™ä¸€æ­¥å®Œæˆåï¼Œä¼šå¾—åˆ°ä¸€æ£µå¸¦æœ‰æ ·å¼çš„DOMæ ‘

![image-20250507173014171](./assets/image-20250507173014171.png)

## å¸ƒå±€

å¸ƒå±€é˜¶æ®µä¼šä¾æ¬¡éå†DOMæ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å‡ ä½•ä¿¡æ¯ï¼›ä¾‹å¦‚èŠ‚ç‚¹çš„å®½é«˜ã€ç›¸å¯¹åŒ…å«å—çš„ä½ç½®
å¤§éƒ¨åˆ†æ—¶å€™ï¼ŒDOMæ ‘å’Œå¸ƒå±€æ ‘å¹¶éä¸€ä¸€å¯¹åº”
æ¯”å¦‚`display: none`çš„èŠ‚ç‚¹æ²¡æœ‰å‡ ä½•ä¿¡æ¯ï¼Œå› æ­¤ä¸ä¼šç”Ÿæˆåˆ°å¸ƒå±€æ ‘ï¼›åˆæ¯”å¦‚ä½¿ç”¨äº†ä¼ªå…ƒç´ é€‰æ‹©å™¨ï¼Œè™½ç„¶DOMæ ‘ä¸­ä¸å­˜åœ¨è¿™äº›ä¼ªå…ƒç´ èŠ‚ç‚¹ï¼Œä½†å®ƒä»¬æ‹¥æœ‰å‡ ä½•ä¿¡æ¯ï¼Œæ‰€ä»¥ä¼šç”Ÿæˆåˆ°å¸ƒå±€æ ‘ä¸­ï¼›è¿˜æœ‰åŒ¿åè¡Œç›’ã€åŒ¿åå—ç›’ç­‰ç­‰éƒ½ä¼šå¯¼è‡´DOMæ ‘å’Œå¸ƒå±€æ ‘æ— æ³•ä¸€ä¸€å¯¹åº”

## åˆ†å±‚

æ¸²æŸ“ä¸»çº¿ç¨‹ä¼šä½¿ç”¨ä¸€å¥—å¤æ‚çš„ç­–ç•¥å¯¹æ•´ä¸ªå¸ƒå±€æ ‘ä¸­è¿›è¡Œåˆ†å±‚
åˆ†å±‚çš„å¥½å¤„åœ¨äºå°†æ¥æŸä¸€ä¸ªå±‚æ”¹å˜åï¼Œä»…ä¼šå¯¹è¯¥å±‚è¿›è¡Œåç»­å¤„ç†ï¼Œä»è€Œæå‡æ•ˆç‡
æ»šåŠ¨æ¡ã€å †å ä¸Šä¸‹æ–‡ã€transformã€opacityç­‰æ ·å¼éƒ½ä¼šæˆ–å¤šæˆ–å°‘çš„å½±å“åˆ†å±‚ç»“æœï¼Œä¹Ÿå¯ä»¥é€šè¿‡`will-change`å±æ€§æ›´å¤§ç¨‹åº¦çš„å½±å“åˆ†å±‚ç»“æœ

![image-20250507184040290](./assets/image-20250507184040290.png)

## ç»˜åˆ¶æŒ‡ä»¤

æ¸²æŸ“ä¸»çº¿ç¨‹ä¼šä¸ºæ¯ä¸ªå±‚å•ç‹¬äº§ç”Ÿç»˜åˆ¶æŒ‡ä»¤é›†ï¼Œç”¨äºæè¿°è¿™ä¸€å±‚çš„å†…å®¹è¯¥å¦‚ä½•ç”»å‡ºæ¥

![image-20250507184733807](./assets/image-20250507184733807.png)

å®Œæˆç»˜åˆ¶åï¼Œæ¸²æŸ“ä¸»çº¿ç¨‹å°†æ¯ä¸ªå›¾å±‚çš„ç»˜åˆ¶ä¿¡æ¯æäº¤ç»™åˆæˆçº¿ç¨‹ï¼Œå‰©ä½™å·¥ä½œå°†ç”±åˆæˆçº¿ç¨‹å®Œæˆ

![image-20250507184802283](./assets/image-20250507184802283.png)

## åˆ†å—

åˆæˆçº¿ç¨‹é¦–å…ˆå¯¹æ¯ä¸ªå›¾å±‚è¿›è¡Œåˆ†å—ï¼Œå°†å…¶åˆ’åˆ†ä¸ºæ›´å¤šçš„å°åŒºåŸŸï¼Œå®ƒä¼šä»çº¿ç¨‹æ± ä¸­æ‹¿å–å¤šä¸ªçº¿ç¨‹æ¥å®Œæˆåˆ†å—å·¥ä½œ
åˆ†å—çš„å·¥ä½œæ˜¯äº¤ç»™å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›è¡Œçš„

![image-20250507185251047](./assets/image-20250507185251047.png)

## å…‰æ …åŒ–

åˆ†å—å®Œæˆåï¼Œè¿›å…¥å…‰æ …åŒ–é˜¶æ®µ
åˆæˆçº¿ç¨‹ä¼šå°†å—ä¿¡æ¯äº¤ç»™GPUè¿›ç¨‹,ï¼Œä»¥æé«˜çš„é€Ÿåº¦å®Œæˆå…‰æ …åŒ–
GPUè¿›ç¨‹ä¼šå¼€å¯å¤šä¸ªçº¿ç¨‹æ¥å®Œæˆå…‰æ …åŒ–ï¼Œ**å¹¶ä¸”ä¼˜å…ˆå¤„ç†é è¿‘è§†å£åŒºåŸŸçš„å—**
å…‰æ …åŒ–çš„ç»“æœï¼Œå°±æ˜¯ä¸€å—ä¸€å—çš„ä½å›¾

![image-20250507185553325](./assets/image-20250507185553325.png)

![image-20250507185651429](./assets/image-20250507185651429.png)

## ç”»

æœ€åä¸€ä¸ªé˜¶æ®µå°±æ˜¯ç”»äº†
åˆæˆçº¿ç¨‹æ‹¿åˆ°æ¯ä¸ªå±‚ã€æ¯ä¸ªå—çš„ä½å›¾åï¼Œç”Ÿæˆä¸€ä¸ªä¸ªã€æŒ‡å¼•(quad)ã€‘ä¿¡æ¯
æŒ‡å¼•ä¼šæ ‡è¯†å‡ºæ¯ä¸ªä½å›¾åº”è¯¥ç”»åˆ°å±å¹•çš„å“ªä¸ªä½ç½®ï¼Œä»¥åŠä¼šè€ƒè™‘åˆ°æ—‹è½¬ã€ç¼©æ”¾ç­‰å˜å½¢
å˜å½¢å‘ç”Ÿåœ¨åˆæˆçº¿ç¨‹ï¼Œä¸æ¸²æŸ“ä¸»çº¿ç¨‹æ— å…³ï¼Œè¿™å°±æ˜¯transformæ•ˆç‡é«˜çš„æœ¬è´¨åŸå› 
åˆæˆçº¿ç¨‹ä¼šæŠŠquadæäº¤ç»™GPUè¿›ç¨‹ï¼Œç”±GPUè¿›ç¨‹äº§ç”Ÿç³»ç»Ÿè°ƒç”¨ï¼Œæäº¤ç»™GPUç¡¬ä»¶ï¼Œå®Œæˆæœ€ç»ˆçš„å±å¹•æˆåƒ

## ä»€ä¹ˆæ˜¯ Reflowï¼Ÿ

å›æµï¼Œé¡µé¢é‡æ’å¸ƒå±€
Reflowçš„æœ¬è´¨å°±æ˜¯é‡æ–°è®¡ç®—layoutæ ‘
å½“è¿›è¡Œäº†ä¼šå½±å“å¸ƒå±€æ ‘çš„æ“ä½œåï¼Œéœ€è¦é‡æ–°è®¡ç®—å¸ƒå±€æ ‘ï¼Œä¼šå¼•å‘layoutå¸ƒå±€é‡æ–°è®¡ç®—
ä¸ºäº†é¿å…è¿ç»­çš„å¤šæ¬¡æ“ä½œå¯¼è‡´å¸ƒå±€æ ‘åå¤è®¡ç®—ï¼Œæµè§ˆå™¨ä¼šåˆå¹¶è¿™äº›æ“ä½œï¼š
**reflowéå¸¸è€—æ—¶ï¼Œæµè§ˆå™¨ä¸ºäº†æå‡æ€§èƒ½ï¼Œå¯¹JSä¸­è¿ç»­å¯¼è‡´reflowçš„ä»£ç ï¼ŒæŠŠreflowçš„æ—¶é—´ç‚¹å»¶è¿Ÿåˆ°ç»“æŸåè¿›è¡Œ**
**ä½†åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°äº†è·å–å°ºå¯¸å’Œä½ç½®çš„ä»£ç ï¼Œæµè§ˆå™¨ä¼šè¿«ä¸å¾—å·²ç«‹å³ reflow**
**æ‰€ä»¥æ”¹åŠ¨å±æ€§é€ æˆçš„Reflowæ˜¯å¼‚æ­¥å®Œæˆçš„**
ä¹ŸåŒæ ·å› ä¸ºå¦‚æ­¤ï¼Œå½“JSè·å–å¸ƒå±€å±æ€§æ—¶ï¼Œå°±å¯èƒ½é€ æˆæ— æ³•è·å–åˆ°æœ€æ–°çš„å¸ƒå±€ä¿¡æ¯

```js
/** è¿›è¡Œå“ªäº›æ“ä½œä¼šå¯¼è‡´ reflow é‡æ’ **/
// 1. è·å–å…ƒç´ çš„å°ºå¯¸å’Œä½ç½®
// 2. ç›´æ¥æˆ–é—´æ¥æ”¹å˜å…ƒç´ çš„å°ºå¯¸å’Œä½ç½®

// æµè§ˆå™¨åœ¨åå¤æƒè¡¡ä¸‹ï¼Œæœ€ç»ˆå†³å®šè·å–å±æ€§ç«‹å³Reflow
```

![image-20250507191734289](./assets/image-20250507191734289.png)

## ä»€ä¹ˆæ˜¯ Repaintï¼Ÿ

é‡ç»˜ï¼ŒRepaintçš„æœ¬è´¨å°±æ˜¯é‡æ–°æ ¹æ®åˆ†å±‚ä¿¡æ¯é‡è®¡ç®—äº†ç»˜åˆ¶æŒ‡ä»¤
å½“æ”¹åŠ¨äº†å¯è§æ ·å¼åï¼Œå°±éœ€è¦é‡æ–°è®¡ç®—ï¼Œä¼šå¼•å‘Repaint
**ç”±äºå…ƒç´ çš„å¸ƒå±€ä¿¡æ¯ä¹Ÿå±äºå¯è§æ ·å¼ï¼Œæ‰€ä»¥Reflowä¸€å®šä¼šå¼•èµ·Repaint**
ç»˜åˆ¶Repaintçš„è¿‡ç¨‹æ˜¯é GPUå®Œæˆçš„ï¼Œé€Ÿåº¦éå¸¸å¿«
å› æ­¤ï¼Œ**ç›¸å¯¹äºå¯¼è‡´Reflowçš„ä»£ç ï¼Œä»…ä¼šå¯¼è‡´Repaintçš„ä»£ç æ•ˆç‡ä¼šé«˜å‡ºå¾ˆå¤š**

![image-20250507191702646](./assets/image-20250507191702646.png)



# å±æ€§æè¿°ç¬¦&`Object.defineProperty`

ç”¨äºå®šä¹‰æˆ–ä¿®æ”¹å¯¹è±¡å±æ€§çš„ç‰¹æ€§
vue2ä¸­ä½¿ç”¨`Object.defineProperty`æ¥åšåˆ°æ•°æ®çš„å“åº”å¼

```js
const obj = {
  name: 'Kyle',
  gender: 'male',
  age: 25,
  interests: ['music', 'skiing']
}

// å¯ä»¥ä½¿ç”¨`Object.getOwnPropertyDescriptor(obj, property)`æ¥è·å–å¯¹è±¡ä¸ŠæŸä¸ªå±æ€§çš„å±æ€§æè¿°ç¬¦
const description = Object.getOwnPropertyDescriptor(obj, 'age')
// description = { value: 25, writable: true, enumerable: true, configurable: true }


// valueï¼šå±æ€§çš„å€¼
// writable: å±æ€§æ˜¯å¦å¯å†™
// enumerable: å±æ€§æ˜¯å¦å¯æšä¸¾ä¿®æ”¹
// configurable: å±æ€§çš„å±æ€§æè¿°ç¬¦æ˜¯å¦å¯é…ç½®


// å¯ä»¥ä½¿ç”¨`Object.defineProperty(obj, property, {})`æ¥å®šä¹‰å’Œè®¾ç½®å¯¹è±¡ä¸Šå±æ€§çš„æè¿°ç¬¦
Object.defineProperty(obj, 'age', {
  value: 26,
  writable: false, // ä¸å¯å†™
  enumerable: true, // å¯æšä¸¾
  configurable: true, // å¯é…ç½®
})
// obj.age = 26


Object.defineProperty(obj, 'age', {
  writable: false
})
obj.age = 28
// obj.age = 26ï¼Œage å±æ€§è¢«å®šä¹‰æˆä¸å¯ä¿®æ”¹ï¼Œå¯¹å±æ€§å€¼çš„èµ‹å€¼ä¿®æ”¹å°†ä¸ç”Ÿæ•ˆ


// æ›´çµæ´»çš„æ–¹å¼å®ç°å±æ€§çš„åªè¯»
let _a = obj.age
Object.defineProperty(obj, 'age', {
  configurable: false, // ä¸å¯æ›´æ”¹æè¿°ç¬¦
  get() { // è¯»å–å™¨ï¼Œè¯»å–å±æ€§æ—¶è§¦å‘
    return _a
	},
  set(newVal) { // è®¾ç½®å™¨ï¼Œè®¾ç½®å±æ€§æ—¶è§¦å‘
    throw new Error('this is a read-only property')
  }
})
console.log(obj.age) // 25
obj.age = 28 // æŠ¥é”™ Error: this is a read-only property
```



# æ­£åˆ™è¡¨è¾¾å¼`RegExp`

ä¸€ç§ç”¨äºåŒ¹é…å’Œæ“ä½œæ–‡æœ¬çš„å¼ºå¤§å·¥å…·ï¼Œç”±ä¸€ç³»åˆ—å­—ç¬¦å’Œç‰¹æ®Šå­—ç¬¦ç»„æˆçš„æ¨¡å¼ï¼Œç”¨äºæè¿°è¦åŒ¹é…çš„æ–‡æœ¬æ¨¡å¼



## åˆ›å»ºæ­£åˆ™å¯¹è±¡

```js
/** 1. é€šè¿‡ RegExp æ„é€ å‡½æ•°åˆ›å»º **/
const rule = new RegExp(/^[GCDZTSPKXLY1-9]\d{1,4}$/, 'ig')

/** 2. é€šè¿‡å­—é¢é‡åˆ›å»º **/
const rule = /^[GCDZTSPKXLY1-9]\d{1,4}$/ig
```

## æ ‡è¯†

| æ ‡è¯†ç¬¦ | å«ä¹‰                                       |
| ------ | ------------------------------------------ |
| i      | ä¸åŒºåˆ†å¤§å°å†™                               |
| g      | å…¨å±€åŒ¹é…ï¼Œå¦‚æœä¸å†™æ­¤æ ‡è¯†ï¼Œåˆ™åªä¼šåŒ¹é…ç¬¬ä¸€ä¸ª |
| m      | å½“è¡ŒåŒ¹é…                                   |

## å¸¸ç”¨æ–¹æ³•

### `rule.test`

```js
const rule = /^aa$/i
// æµ‹è¯•å­—ç¬¦ä¸²æ˜¯å¦æ»¡è¶³è§„åˆ™
rule.test('a') // false
rule.test('aa') // true
```

### `str.replace`

```js
// reg æ˜¯æ­£åˆ™å¯¹è±¡ï¼Œ str æ˜¯å­—ç¬¦ä¸²
// å°†å­—ç¬¦ä¸²ä¸­åŒ¹é…è§„åˆ™çš„éƒ¨åˆ†æ›¿æ¢æˆæ›¿æ¢å€¼
str.replace(reg, 'æ›¿æ¢å€¼')

// å°†å­—ç¬¦ä¸²ä¸­åŒ¹é…æ­£åˆ™çš„éƒ¨åˆ†ä¼ å…¥åˆ°å›è°ƒå‡½æ•°çš„å‚æ•°ä¸­ï¼Œå°†å‡½æ•°çš„è¿”å›ç»“æœè¿›è¡Œæ›¿æ¢
str.replace(reg, (s) => {
  return 'æ›¿æ¢å€¼'
})
```

## å¸¸ç”¨è§„åˆ™

[æ­£åˆ™è¡¨è¾¾å¼è¯¦è§ğŸ”—](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_expressions)

| å­—ç¬¦åŒ¹é…è§„åˆ™ä¹¦å†™     | å«ä¹‰                                                         |
| -------------------- | ------------------------------------------------------------ |
| ç›´æ¥ä¹¦å†™ä¸€ä¸ªæ™®é€šå­—ç¬¦ | åŒ¹é…ä¹¦å†™çš„å­—ç¬¦                                               |
| `[å­—ç¬¦è§„åˆ™]`         | åŒ¹é…`[]`ä¸­å‡ºç°çš„æ‰€æœ‰å­—ç¬¦è§„åˆ™                                 |
| `[^å­—ç¬¦è§„åˆ™]`        | åŒ¹é…`[]`ä¸­æ²¡æœ‰å‡ºç°çš„å­—ç¬¦è§„åˆ™                                 |
| `.`                  | åŒ¹é…ä»»æ„å­—ç¬¦                                                 |
| `\d`                 | åŒ¹é…æ•°å­—ï¼Œç­‰ä»·äº`[0-9]`                                      |
| `\D`                 | åŒ¹é…éæ•°å­—                                                   |
| `\s`                 | åŒ¹é…ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€å›è½¦ã€æ¢è¡Œã€åˆ¶è¡¨ç¬¦                   |
| `\S`                 | åŒ¹é…æ‰€æœ‰éç©ºç™½å­—ç¬¦                                           |
| `\w`                 | åŒ¹é…å•è¯å­—ç¬¦ï¼Œç­‰ä»·äº`[A-Za-z0-9_]`                           |
| `\W`                 | åŒ¹é…éå•è¯å­—ç¬¦ï¼Œç­‰ä»·äº`[^A-Za-z0-9_]`                        |
| `^`                  | åŒ¹é…å­—ç¬¦ä¸²å¼€å§‹ï¼Œå†™åœ¨è§„åˆ™å¼€å§‹ä½ç½®                             |
| `$`                  | åŒ¹é…å­—ç¬¦ä¸²ç»“æŸï¼Œå†™åœ¨è§„åˆ™ç»“æŸä½ç½®                             |
| `\\`                 | ä½¿ç”¨`\`è¿›è¡Œå¯¹ç‰¹æ®Šå­—ç¬¦çš„è½¬ä¹‰ï¼Œä¾‹å¦‚ï¼š`\.`ï¼ˆåŒ¹é…å­—ç¬¦ä¸²çš„`.`ï¼‰ã€`\/`ï¼ˆåŒ¹é…`/`ï¼‰ |

å¤šä¸ªè§„åˆ™å¯ä»¥è¿ç»­ä¹¦å†™ï¼Œç”¨ä»¥åŒ¹é…å¤šä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚ï¼š

```js
// åŒ¹é… 1 ä¸ªæ•°å­—ç´§è·Ÿ 1 ä¸ªå­—æ¯ï¼Œä¾‹å¦‚ 3cã€2Aã€0y
const rule = /\d[a-zA-Z]/
```

è‹¥å¤šä¸ªè§„åˆ™æ˜¯æˆ–è€…çš„å…³ç³»ï¼Œä½¿ç”¨`|`åˆ†å‰²ï¼Œä¾‹å¦‚ï¼š

```js
// åŒ¹é…ä»¥ 1 ä¸ªæ•°å­—ç´§è·Ÿ 1 ä¸ªå­—æ¯ï¼Œæˆ–è€… 1 ä¸ªå­—æ¯ç´§è·Ÿ 1 ä¸ªæ•°å­—ï¼Œä¾‹å¦‚ 3dã€b2
const rule = /\d[a-zA-Z]|[a-zA-Z]\d/
```

è§„åˆ™çš„é‡å¤ï¼ˆé‡è¯ï¼‰
ä¸€ä¸ªæˆ–ä¸€æ®µè§„åˆ™ä¹‹åï¼Œå¯ä»¥ç´§è·Ÿä¸€ä¸ªé‡è¯ï¼Œè¡¨ç¤ºå‰é¢çš„è§„åˆ™å‡ºç°çš„æ¬¡æ•°

```js
// åŒ¹é… 1 ä¸ªå­—æ¯ï¼Œåé¢è·Ÿä¸Šè¿ç»­çš„ 3 ä¸ªæ•°å­—ï¼Œ{3} æ˜¯é‡è¯ï¼Œåº”ç”¨çš„è§„åˆ™æ˜¯ \d
const rule = /[a-zA-Z]\d{3}/

// {3} æ˜¯é‡è¯ï¼Œåº”ç”¨çš„è§„åˆ™æ˜¯ [a-zA-Z]\d
const rule = /([a-zA-Z]\d){3}/
```

| é‡è¯    | å«ä¹‰                            |
| ------- | ------------------------------- |
| `{n}`   | å‡ºç° n æ¬¡                       |
| `{n,m}` | å‡ºç° n åˆ° m æ¬¡                  |
| `{n,}`  | è‡³å°‘å‡ºç° n æ¬¡                   |
| `*`     | å‡ºç° 0 æ¬¡æˆ–å¤šæ¬¡ï¼Œç­‰ä»·äº`{0,}`   |
| `?`     | å‡ºç° 0 æ¬¡æˆ– 1 æ¬¡ï¼Œç­‰ä»·äº`{0,1}` |
| `+`     | å‡ºç° 1 æ¬¡æˆ–å¤šæ¬¡ï¼Œç­‰ä»·äº`{1,}`   |



# å¼‚å¸¸`Error`

å¼‚å¸¸å¹¶éåäº‹ï¼Œå®ƒå¯ä»¥è®©å¼€å‘äººå‘˜åŠæ—¶å‘ç°é”™è¯¯ã€å®šä½é”™è¯¯ï¼Œç”šè‡³åœ¨æŸäº›æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ•…æ„çš„æŠ›å‡ºå¼‚å¸¸
**æ¯ä¸ªå¼‚å¸¸éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡å¯¹åº”çš„æ„é€ å‡½æ•°åˆ›å»º**

| å¼‚å¸¸ç±»å‹         | å«ä¹‰                                         |
| ---------------- | -------------------------------------------- |
| `SyntaxError`    | è¯­æ³•é”™è¯¯                                     |
| `ReferenceError` | å¼•ç”¨é”™è¯¯ï¼Œå¾€å¾€æ˜¯ä½¿ç”¨äº†æœªå®šä¹‰çš„å˜é‡æˆ–å‡½æ•°     |
| `TypeError`      | ç±»å‹é”™è¯¯ï¼Œå¾€å¾€æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªå¯¹è±¡ä¸­ä¸å­˜åœ¨çš„æˆå‘˜ |

å¦‚ä½•æ•è·å¼‚å¸¸ï¼Ÿ

```js
try {
  // å¯èƒ½ä¼šäº§ç”Ÿé”™è¯¯çš„ä»£ç å—
  // ...
} catch(err) {
  // å½“ try ä¸­çš„ä»£ç å‡ºç°å¼‚å¸¸åï¼Œä¼šæ‰§è¡Œæ­¤å¤„çš„ä»£ç ï¼Œå¼‚å¸¸å¯¹è±¡ä¼šä¼ é€’ç»™ err
  // ...
  console.log(err.message)
} finally {
  // å¯çœç•¥ä¸å†™ï¼Œæ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œ
}
```

å¦‚ä½•æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼Ÿ

```js
throw å¼‚å¸¸å¯¹è±¡ // ä»£ç è¿è¡Œåˆ°è¿™ï¼Œä¼šç»ˆæ­¢ç»§ç»­è¿è¡Œï¼Œå¹¶æŠ›å‡ºå¼‚å¸¸å¯¹è±¡ï¼Œæ•ˆæœå’Œæµè§ˆå™¨æŠ›å‡ºçš„å¼‚å¸¸å®Œå…¨ä¸€æ ·

// ä¾‹å¦‚
throw new ReferenceError('æ‰¾ä¸åˆ°å¯¹åº”çš„æˆå‘˜')
```



# Promise



## Promise è§„èŒƒ

Promiseå±ä¸€å¥—ä¸“é—¨å¤„ç†å¼‚æ­¥åœºæ™¯çš„è§„èŒƒ
å®ƒèƒ½æœ‰æ•ˆçš„é¿å…å›è°ƒåœ°ç‹±çš„äº§ç”Ÿï¼Œä½¿å¼‚æ­¥ä»£ç æ›´åŠ æ¸…æ™°ã€ç®€æ´ã€ç»Ÿä¸€
è¿™å¥—è§„èŒƒæœ€æ—©è¯ç”Ÿäºå‰ç«¯ç¤¾åŒºï¼Œè§„èŒƒåç§°ä¸º`Promise A+`

- æ‰€æœ‰çš„å¼‚æ­¥åœºæ™¯ï¼Œéƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œæ¯ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œåœ¨JSä¸­åº”è¯¥è¡¨ç°ä¸ºä¸€ä¸ªå¯¹è±¡
  è¯¥å¯¹è±¡ç§°ä¹‹ä¸ºPromiseå¯¹è±¡ï¼Œä¹Ÿå«åšä»»åŠ¡å¯¹è±¡

  ![image-20250610103649596](./assets/image-20250610103649596.png)

- æ¯ä¸ªä»»åŠ¡å¯¹è±¡ï¼Œéƒ½åº”è¯¥æœ‰**ä¸¤ä¸ªé˜¶æ®µã€ä¸‰ä¸ªçŠ¶æ€**

  ![image-20250610103912336](./assets/image-20250610103912336.png)

  æ ¹æ®å¸¸ç†ï¼Œå®ƒä»¬ä¹‹é—´å­˜åœ¨ä»¥ä¸‹é€»è¾‘ï¼š

  1. ä»»åŠ¡æ€»æ˜¯ä»æœªå†³é˜¶æ®µå˜åˆ°å·²å†³é˜¶æ®µï¼Œæ— æ³•é€†è¡Œ
  2. ä»»åŠ¡æ€»æ˜¯ä»æŒ‚èµ·çŠ¶æ€å˜åˆ°å®Œæˆæˆ–å¤±è´¥çŠ¶æ€ï¼Œæ— æ³•é€†è¡Œ
  3. ä»»åŠ¡ä¸€æ—¦å®Œæˆæˆ–å¤±è´¥ï¼ŒçŠ¶æ€å°±å›ºå®šä¸‹æ¥ï¼Œæ°¸è¿œæ— æ³•æ”¹å˜

- æŒ‚èµ·-->å®Œæˆï¼Œç§°ä¹‹ä¸º`resolve`ï¼ŒæŒ‚èµ·-->å¤±è´¥ï¼Œç§°ä¹‹ä¸º`reject`
  ä»»åŠ¡å®Œæˆæ—¶ï¼Œå¯èƒ½æœ‰ä¸€ä¸ªç›¸å…³æ•°æ®ï¼›ä»»åŠ¡å¤±è´¥æ—¶ï¼Œå¯èƒ½æœ‰ä¸€ä¸ªå¤±è´¥åŸå› 

  ![image-20250610104921763](./assets/image-20250610104921763.png)

- å¯ä»¥é’ˆå¯¹ä»»åŠ¡è¿›è¡Œåç»­å¤„ç†
  é’ˆå¯¹å®ŒæˆçŠ¶æ€çš„åç»­å¤„ç†ç§°ä¹‹ä¸º`onFulfilled`ï¼Œé’ˆå¯¹å¤±è´¥çš„åç»­å¤„ç†ç§°ä¹‹ä¸º`onRejected`

  ![image-20250610105104306](./assets/image-20250610105104306.png)

## é“¾å¼è°ƒç”¨

![image-20250610114735654](./assets/image-20250610114735654.png)

- `.then`æ–¹å‘å¿…å®šä¼šè¿”å›ä¸€ä¸ªæ–°çš„`Promise`ï¼Œå¯ç†è§£ä¸º**åç»­å¤„ç†ä¹Ÿæ˜¯ä¸€ä¸ªä»»åŠ¡**

  ```js
  const p1 = new Promise((resolve, reject) => { resolve('end, true') })
  const p2 = p1.then(() => {
    console.log('p1 success')
  })
  setTimeout(() => {
    console.log(p2) // Promise { undefined }
  }, 1000)
  ```

- æ–°ä»»åŠ¡çš„çŠ¶æ€å–å†³äºåç»­å¤„ç†ï¼š

  1. è‹¥æ–°ä»»åŠ¡æ²¡æœ‰ç›¸å…³çš„åç»­å¤„ç†ï¼Œåˆ™æ–°ä»»åŠ¡çš„çŠ¶æ€å’Œå‰ä»»åŠ¡ä¸€è‡´ï¼Œæ•°æ®ä¸ºå‰ä»»åŠ¡çš„æ•°æ®

     ```js
     const p1 = new Promise((resolve, reject) => {
       reject(false)
     })
     const p2 = p1.then(() => {
       console.log('success')
     })
     setTimeout(() => {
       console.log(p2) // Promise { <rejected> false }
     }, 1000)
     // p1 çš„çŠ¶æ€ä¸º rejectedï¼Œè€Œ p2 æ²¡æœ‰å¯¹ p1 è¿›è¡Œ onRejected çš„åç»­å¤„ç†
     // åˆ™ p2 çŠ¶æ€å’Œ p1 ä¸€è‡´ï¼Œä¹Ÿæ˜¯ rejectedï¼Œæ•°æ®ä¹Ÿæ˜¯ false
     ```

  2. è‹¥æ–°ä»»åŠ¡çš„æœ‰ç›¸å…³çš„åç»­å¤„ç†ï¼Œä½†å‰ä»»åŠ¡çŠ¶æ€è¿˜æœªæ‰§è¡Œç¡®å®šï¼Œåˆ™æ–°ä»»åŠ¡æŒ‚èµ·ï¼ŒçŠ¶æ€ä¸º`pending`

     ```js
     const p1 = new Promise((resolve, reject) => {
       setTimeout(() => {
         resolve('end, true')
       }, 2000)
     })
     const p2 = p1.then(() => {
       console.log('p1 success')
     })
     setTimeout(() => {
       console.log(p2) // Promise { <pending> }
     }, 1000)
     // p2 æœ‰å¯¹ p1 çš„ onFulfilled çš„åç»­å¤„ç†ï¼Œä½†æ­¤æ—¶ p1 è¿˜æ²¡æœ‰ resolve ç¡®å®šçŠ¶æ€
     // æ‰€ä»¥ p2 çš„çŠ¶æ€ä¸º pending
     ```

  3. è‹¥æ–°ä»»åŠ¡æœ‰ç›¸å…³åç»­å¤„ç†å¹¶ä¸”å‰ä»»åŠ¡æ‰§è¡Œäº†ï¼Œåˆ™æ ¹æ®åç»­å¤„ç†çš„æƒ…å†µç¡®å®šæ–°ä»»åŠ¡çš„çŠ¶æ€

     - åç»­å¤„ç†æ‰§è¡Œæ— é”™ï¼Œæ–°ä»»åŠ¡çš„çŠ¶æ€ä¸º`fulfilled`ï¼Œ**æ•°æ®ä¸ºåç»­å¤„ç†çš„è¿”å›å€¼**

       ```js
       const p1 = new Promise((resolve, reject) => { reject(false) })
       const p2 = p1.catch(() => {
         return 'æ•è·å‰ä»»åŠ¡é”™è¯¯'
       })
       setTimeout(() => {
         console.log(p2) // Promise { 'æ•è·å‰ä»»åŠ¡é”™è¯¯' }
       }, 1000)
       // å³ä½¿ p1 çš„çŠ¶æ€æ˜¯ rejectedï¼Œä½†æ˜¯ p2 æœ‰é’ˆå¯¹çš„åç»­å¤„ç†ï¼Œä¸”ä»£ç æ²¡æœ‰æ‰§è¡Œé”™è¯¯
       // åˆ™ p2 çš„çŠ¶æ€å°±æ˜¯ fulfilled æ•°æ®ä¸ºå¤„ç†ä¸­çš„è¿”å›å€¼ï¼Œæ²¡æœ‰åˆ™æ˜¯ undefined
       ```

     - åç»­å¤„ç†æ‰§è¡Œæœ‰é”™ï¼Œæ–°ä»»åŠ¡çš„çŠ¶æ€ä¸º`rejected`ï¼Œæ•°æ®ä¸ºå¼‚å¸¸å¯¹è±¡

       ```js
       const p1 = new Promise((resolve, reject) => { resolve(true) })
       const p2 = p1.then(() => {
       	throw new Error('æ‰§è¡Œå‘ç”Ÿé”™è¯¯')
       })
       setTimeout(() => {
       	console.log(p2) // Promise { <rejected> Error: æ‰§è¡Œå‘ç”Ÿé”™è¯¯ }
       }, 1000)
       // å³ä½¿ p1 ä¸º fulfilledï¼Œä¸” p2 ä¹Ÿæœ‰å¯¹åº”åç»­å¤„ç†ï¼Œä½† p2 çš„å¤„ç†ä¸­æœ‰æ‰§è¡Œé”™è¯¯
       // åˆ™ p2 çš„çŠ¶æ€ä¼šå˜æˆ rejected
       ```

     - åç»­æ‰§è¡Œåè¿”å›çš„æ˜¯ä¸€ä¸ªä»»åŠ¡å¯¹è±¡ï¼Œå³`return new Promise`ï¼Œåˆ™æ–°ä»»åŠ¡çš„çŠ¶æ€å’Œæ•°æ®ä¸è¿”å›çš„è¯¥ä»»åŠ¡å¯¹è±¡ä¸€è‡´

       ```js
       // p1 çŠ¶æ€ä¸º fulfilled
       const p1 = new Promise((resolve, reject) => { resolve(true) })
       
       // Promise { <pending> }
       const p2 = p1.then(() => {
         return new Promise((resolve, reject) => {})
         // è¿”å›çš„ä»»åŠ¡å¯¹è±¡ï¼Œä½†çŠ¶æ€æœªç¡®å®šï¼Œåˆ™ p2 çš„çŠ¶æ€ä¹Ÿå’Œè¿”å›çš„ä»»åŠ¡å¯¹è±¡ä¸€è‡´
       })
       
       // Promise { true }
       const p2 = p1.then(() => {
         return new Promise((resolve, reject) => { resolve(true) })
         // è¿”å›çš„ä»»åŠ¡å¯¹è±¡çŠ¶æ€æ˜¯ fulfilledï¼Œåˆ™ p2 ä¹Ÿä¿æŒä¸€è‡´
       })
       
       // Promise { <rejected> false }
       const p2 = p1.then(() => {
         return new Promise((resolve, reject) => { reject(false) })
         // è¿”å›çš„ä»»åŠ¡å¯¹è±¡çŠ¶æ€æ˜¯ rejectedï¼Œåˆ™ p2 ä¹Ÿä¿æŒä¸€è‡´
       })
       ```

## Promise çš„é™æ€æ–¹æ³•

| æ–¹æ³•                     | å«ä¹‰                                                         |
| ------------------------ | ------------------------------------------------------------ |
| `Promise.resolve(data)`  | ç›´æ¥è¿”å›ä¸€ä¸ªçŠ¶æ€ä¸º`fulfilled`çš„ä»»åŠ¡å¯¹è±¡ï¼Œç›¸å½“äº`new Promise((resolve) => resolve())` |
| `Promise.reject(reason)` | ç›´æ¥è¿”å›ä¸€ä¸ªçŠ¶æ€ä¸º`rejected`çš„ä»»åŠ¡å¯¹è±¡                       |
| `Promise.all([])`        | è¿”å›ä¸€ä¸ªä»»åŠ¡å¯¹è±¡ï¼Œæ•°ç»„ä¸­**å…¨éƒ¨ä»»åŠ¡éƒ½æˆåŠŸ**åˆ™ä¸º`fulfilled`ï¼Œå¦åˆ™ä¸º`rejected` |
| `Promise.any([])`        | è¿”å›ä¸€ä¸ªä»»åŠ¡å¯¹è±¡ï¼Œæ•°ç»„ä¸­**ä»»æ„ä¸€ä¸ªæˆåŠŸ**å°±ä¸º`fulfilled`ï¼Œå¦åˆ™ä¸º`rejected` |
| `Promise.allSettled([])` | è¿”å›ä¸€ä¸ªä»»åŠ¡å¯¹è±¡ï¼Œæ•°ç»„ä¸­**å…¨éƒ¨ä»»åŠ¡çŠ¶æ€å·²å†³å®š**åˆ™ä¸º`fulfilled`ï¼Œ**è¯¥ä»»åŠ¡ä¸ä¼šå¤±è´¥** |
| `Promise.race([])`       | è¿”å›ä¸€ä¸ªä»»åŠ¡å¯¹è±¡ï¼Œæ•°ç»„ä¸­**æœ€å…ˆçŠ¶æ€å·²å†³å®š**ï¼ŒçŠ¶æ€äºå…¶ä¸€è‡´     |

## `async/await`

ES7æ¨å‡ºäº†ä¸¤ä¸ªå…³é”®å­—ï¼Œå¯ä»¥ä½¿ç”¨åŒæ­¥çš„è¯­æ³•æ¥ä¹¦å†™å¼‚æ­¥ä»£ç 

```js
/**
* async
* async å…³é”®å­—ç”¨äºä¿®é¥°å‡½æ•°ï¼Œè¢«å®ƒä¿®é¥°çš„å‡½æ•°ï¼Œä¸€å®šè¿”å› Promise
**/
async function method() {
  return 1 // è¿”å› Promise å®Œæˆåçš„æ•°æ®
  // return await 1
  // æ²¡æœ‰é…åˆ await ä½¿ç”¨ï¼Œä»£ç ä¸ä¼šæ”¾åˆ°å¾®é˜Ÿåˆ—æ‰§è¡Œï¼Œç›´æ¥åŒæ­¥è¿è¡Œ
}
method() // Promise { 1 }

async function method() {
  return Promise.resolve(1) // è‹¥è¿”å›çš„æ˜¯ Promiseï¼Œåˆ™ method å°†ä¸ Promise çŠ¶æ€å’Œæ•°æ®ä¿æŒä¸€è‡´
}
method() // Promise { <pending> }

async function method() {
  throw new Error('é”™è¯¯') // è‹¥æ‰§è¡Œè¿‡ç¨‹æŠ¥é”™ï¼Œåˆ™ä»»åŠ¡çŠ¶æ€æ—¶ rejected
}
method() // Promise { <rejected> Error('é”™è¯¯') }


/**
* await
* await å…³é”®å­—è¡¨ç¤ºç­‰å¾…æŸä¸ª Promise å®Œæˆï¼Œå®ƒå¿…é¡»ç”¨äº async å‡½æ•°é‡Œ
* await is only valid in async function
* å½“å‰å‡½æ•°ä¸­ï¼Œawait åé¢çš„ä»£ç éƒ½ä¼šè¿›å…¥å¾®é˜Ÿåˆ—ç­‰å¾…æ‰§è¡Œ
**/
async function method() {
  const n = await Promise.resolve(1) // æˆ–è€… const n = await 1
  console.log(n) // n = 1
}
// ä¸Šé¢çš„å‡½æ•°ç­‰åŒäº
function method() {
  return new Promise((resolve) => {
    Promise.resolve(1).then((n) => {
      console.log(n)
      resolve()
    })
  })
}
// await åå¯ä»¥ä¹¦å†™é Promise å¯¹è±¡
async function method() {
  await 1 // ç­‰åŒäº await Promise.resolve(1) ï¼Œä¼šè‡ªåŠ¨å°†é Promise æ•°æ®åŒ…è£…æˆ Promise å¯¹è±¡
}
// é’ˆå¯¹ rejected è¿›è¡Œä»»åŠ¡å¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨ try-catch è¯­æ³•
async function method() {
  try {
    await Promise.reject('error')
  } catch(err) {
    console.log(err)
  }
}
```



# `HTML`è¡¥å……



## lorem

ä¹±æ•°å‡æ–‡ï¼Œç”¨äºç”Ÿæˆæµ‹è¯•å¾—ä¹±åºæ–‡æœ¬

```html
<!-- è¯­æ³•ï¼šåœ¨æ¨¡æ¿ä¸­è¾“å…¥loremï¼ŒæŒ‰å›è½¦é”®ï¼Œè‡ªåŠ¨ç”Ÿæˆ -->

<!-- ç”Ÿæˆ4ä¸ªä¹±åºæ–‡æœ¬è¯ -->
lorem4
Lorem ipsum dolor sit
<!-- ç”Ÿæˆ2è¡Œä¸”æ¯è¡Œ5ä¸ªä¹±åºæ–‡æœ¬è¯ -->
lorem5*2
Lorem ipsum dolor sit amet.
Corrupti nobis animi doloribus eius.
```

## æ–‡æ¡£ç‰‡æ®µ

åœ¨éœ€é¢‘ç¹åœ°åˆ›å»ºDOMå…ƒç´ æ·»åŠ åˆ°DOMæ ‘ä¸­æƒ…å†µä¸‹ï¼Œä½¿ç”¨`document.createDocumentFragment()`æ¥é¿å…å¤šæ¬¡æ“ä½œDOMæ ‘

```js
function createLrcElements() {
  var frag = document.createDocumentFragment() // åˆ›å»ºæ–‡æ¡£ç‰‡æ®µ
  for (vari = 0; i < Data.length; i++) {
    var li = document.createElement('li')
    li.textContent = Data[i].words
    frag.appendChild(li) // æ­¤æ—¶æ–‡æ¡£ç‰‡æ®µè¿˜æœªæŒ‚è½½åˆ°DOMæ ‘ä¸Šï¼Œä¸ä¼šå½±å“DOMæ ‘
    // ul.appendChild(li) // é¢‘ç¹åœ°ä¿®æ”¹DOMæ ‘
  }
  ul.appendChild(frag)
}
```

## DOM å°ºå¯¸å’Œä½ç½®

![image-20250528163324028](./assets/image-20250528163324028.png)

![image-20250528184005653](./assets/image-20250528184005653.png)

# `JavaScript`è¡¥å……



## `Object`

### `.freeze`

å†»ç»“å¯¹è±¡ï¼Œä¸å…è®¸æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹ä»»ä½•å±æ€§ï¼Œå¯¹è±¡ä¿æŒä¸å˜

```js
const obj = {
  name: 'Kyle',
  gender: 'male',
  age: 25,
  interests: ['music', 'skiing']
}
Object.freeze(obj) // freeze the object so that it cannot be changed.

obj.name = 'Lily' // not work
obj.age = 26 // not work

// æ­¤å¤„ä¿®æ”¹ç”Ÿæ•ˆçš„åŸå› ï¼šå†»ç»“çš„æ˜¯interestsè¿™ä¸ªå±æ€§çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯æ•°ç»„æœ¬èº«ï¼›å› æ­¤ï¼Œæ— æ³•é‡æ–°åˆ†é…interestsæŒ‡å‘æ–°çš„æ•°ç»„ï¼ˆå¦‚interests = [...]ï¼‰ï¼Œä½†å¯ä»¥ä¿®æ”¹åŸæ•°ç»„çš„å†…å®¹ï¼Œæ¯”å¦‚pop()æˆ–push()æ“ä½œ
obj.interests.pop() // work
obj.interests[1] = 'football' // work

obj.interests = ['music', 'skiing', 'baseball'] // not work
console.log(obj) // { name: 'Kyle', gender: 'male', age: 25, interests: [ 'music', 'football' ] }
```

[^æ³¨æ„]: `Object.freeze`æ˜¯æµ…å†»ç»“ï¼Œåªèƒ½å†»ç»“å¯¹è±¡çš„ç¬¬ä¸€å±‚å±æ€§ï¼Œè€ŒåµŒå¥—çš„å¯¹è±¡æˆ–æ•°ç»„å¹¶ä¸ä¼šè¢«å†»ç»“

### `.seal`

å°é—­å¯¹è±¡ï¼Œä¸å…è®¸æ·»åŠ æˆ–åˆ é™¤å±æ€§ï¼Œåªå…è®¸ä¿®æ”¹ç°æœ‰å±æ€§çš„å€¼

```js
const obj = {
  name: 'Kyle',
  gender: 'male',
  age: 25,
  interests: ['music', 'skiing']
}
Object.seal(obj)

obj.age = 26 // work
obj.interests.push('gaming') // work
obj.phone = '1234567890' // no work
delete obj.name // no work

// {
//   name: 'Kyle',
//   gender: 'male',
//   age: 26,
//   interests: [ 'music', 'skiing', 'gaming' ]
// }
```

### `.is`

å¯ä»¥åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸åŒï¼ŒåŠŸèƒ½ä¸ `===`åŸºæœ¬ä¸€è‡´
åŒºåˆ«åœ¨äºï¼Œä½¿ç”¨`Object.is`ä¸­ï¼Œ`NaN === NaN`ï¼Œ`+0 !== -0`ï¼Œè€Œ`===`çš„ç»“æœåˆšå¥½ç›¸å

```js
Object.is(1, 2) // false
Object.is('1', 1) // false
Object.is(NaN, NaN) // true
Object.is(+0, -0) // false
```



## `Array`

### `.slice`

æ•°ç»„åˆ‡å‰²ï¼Œä¸å½±å“åŸæ•°æ®ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„

```js
// æ•°ç»„åˆ‡å‰²
const a = [0, 1, 2, 3]
const b = a.slice(0, 3) // b = [0, 1, 2]

// é€šè¿‡Array.slice()æ–¹æ³•å°†`ä¼ªæ•°ç»„`è½¬åŒ–æˆçœŸæ•°ç»„
const obj = {
  0: 'a',
  1: 'b',
  length: 2
}
const arr = Array.prototype.slice.call(obj) // arr = ['a', 'b']
```

### `.from`

å¯ä»¥å°†ä¸€ä¸ªç±»æ•°ç»„æˆ–ä¼ªæ•°ç»„è½¬æ¢æˆä¸€ä¸ªçœŸæ­£çš„æ•°ç»„è¿”å›ï¼Œä¸å½±å“åŸæ•°æ®

```js
const obj = {
  0: 'a',
  1: 'b',
  length: 2
}
const arr = Array.from(obj) // arr = ['a', 'b']
```

## è§£æ„

```js
/** æ•°ç»„è§£æ„ **/
const arr = [1, 2, 3, 4]
// å–å‡ºæ¯ä¸€é¡¹å€¼
const [a, b, c, d] = arr
// ä»…å–å‡ºä¸‹æ ‡ä¸º1å’Œ2çš„å€¼
const [, b, c] = arr
// å–å‡ºä¸‹æ ‡1å’Œ3çš„å€¼
const [, b, , d] = arr
// å–å‡ºarrä¸­å‰ä¸¤ä¸ªï¼Œæ”¾åˆ°å˜é‡aå’Œbä¸­ï¼Œå‰©ä¸‹çš„å€¼æ”¾åˆ°ä¸€ä¸ªæ–°æ•°ç»„arr2ä¸­
const [a, b, ...arr2] = arr

/** å¯¹è±¡è§£æ„ **/
const obj = { a: 1, b: 2, c: 3 }
// å¤åˆ¶objçš„æ‰€æœ‰å€¼åˆ°ä¸€ä¸ªæ–°çš„å¯¹è±¡
const obj2 = { ...obj } // obj !== obj2
// å¤åˆ¶objä¸­é™¤äº†å±æ€§aä»¥å¤–çš„å€¼åˆ°ä¸€ä¸ªæ–°çš„å¯¹è±¡
const { a, ...obj2 } = obj
```

## æ•°æ®è¿ç®—

### éšå¼è½¬æ¢

æ¯ä¸ªè¿ç®—ç¬¦éƒ½æœ‰è‡ªå·±æœŸæœ›çš„æ•°æ®æ ¼å¼ï¼Œæ¯”å¦‚`+`ã€`-`ã€`*`ã€`/`æœŸæœ›ä¸¤è¾¹éƒ½æ˜¯`number`ç±»å‹
ä¸€æ—¦æ•°æ®ä¸ç¬¦åˆè¿ç®—ç¬¦çš„æœŸæœ›ï¼ŒJS å°±ä¼šå¯¹æ•°æ®è¿›è¡Œéšå¼çš„è½¬æ¢ï¼šå°†æ•°æ®å˜æˆæœŸæœ›çš„æ ¼å¼åå†è¿›è¡Œè¿ç®—
è¿™ç§è½¬æ¢æ˜¯ä¸´æ—¶çš„ï¼Œå¹¶ä¸ä¼šå¯¹åŸå§‹æ•°æ®é€ æˆå½±å“

```js
// åˆ©ç”¨`+`ã€`-`å°†å­—ç¬¦ä¸²è½¬æ•°å­—
let a = '001'
+a // a = 1
let b = '02'
-b // -2

// `+`çš„ä¸€è¾¹æ˜¯å­—ç¬¦ä¸²çš„æƒ…å†µä¸‹ï¼Œåˆ™ä¼šè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥
let str = '10'
let str_1 = '11'
let number = 12
0 + str // '010'
number + '' // '12'
str + str_1 // '1011'

// `!`éè½¬æ¢ä¸ºå¸ƒå°”å€¼
let bol = '123'
!bol // false
!!bol // true
!'' // trueï¼Œç©ºå­—ç¬¦ä¸²åˆ¤å®šä¸º falseï¼Œå–åä¸º true

// è¡¨è¾¾å¹³æ–¹è¿ç®—ï¼Œå¯ä»¥ä»£æ›¿Math.pow()
3 ** 2 // 9ï¼Œå³ Math.pow(3, 2)
2 ** 3 // 8
```

### å¸ƒå°”åˆ¤å®š

æ‰€æœ‰éœ€è¦åˆ¤æ–­çœŸå‡çš„åœ°æ–¹éƒ½ä¼šä½¿ç”¨ä»¥ä¸‹è§„åˆ™

| æ•°æ®                                                         | åˆ¤å®šç»“æœ |
| ------------------------------------------------------------ | -------- |
| falseã€nullã€undefinedã€0ï¼ˆæ•°å­—ï¼‰ã€NaNï¼ˆéæ•°å­—ï¼‰ã€''ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ | false    |
| å‰©ä½™å…¶ä»–æ‰€æœ‰æ•°æ®                                             | true     |

### `&&`è¿ç®—ç¬¦

ä¸”ï¼Œéƒ½çœŸæ‰ä¸ºçœŸï¼Œæœ‰ä¸€ä¸ªä¸ºå‡å°±ä¸ºå‡ï¼Œå…·æœ‰çŸ­è·¯è§„åˆ™
è¡¨è¾¾å¼è¿”å›çš„æ˜¯**æœ€åä¸€ä¸ªåˆ¤æ–­çš„æ•°æ®**ï¼Œè€Œä¸æ˜¯å¸ƒå°”å€¼
åˆ¤æ–­åˆ°ç¬¬ä¸€ä¸ªå‡å°±ä¼šç»“æŸ

```js
// çŸ­è·¯è§„åˆ™ï¼šä»¥ä¸‹ä¸ºä¾‹ï¼Œå‡å¦‚ç¬¬ä¸€ä¸ªå·²ç»åˆ¤å®šä¸ºfalseï¼Œåˆ™ç›´æ¥è¿”å›è¯¥å€¼ï¼Œåç»­çš„ä¸ä¼šè¿›è¡Œåˆ¤å®š
let a = 1 && 2 // a = 2
let b = 0 && 3 // b = 0

// å®é™…å¼€å‘ä¸­ï¼Œåˆ©ç”¨çŸ­è·¯è§„åˆ™ç®€åŒ–ä»£ç 
if (example) {
  console.log('1')
}
// ç®€åŒ–
example && console.log('1')
```

### `||`è¿ç®—ç¬¦

æˆ–ï¼Œå…¨å‡æ‰ä¸ºå‡ï¼Œæœ‰ä¸€çœŸå°±ä¸ºçœŸï¼Œå…·æœ‰çŸ­è·¯è§„åˆ™
è¿”å›çš„æ˜¯**æœ€åä¸€ä¸ªåˆ¤å®šçš„æ•°æ®**
åˆ¤æ–­åˆ°ç¬¬ä¸€ä¸ªçœŸå°±ä¼šç»“æŸ

```js
if (example) {
  n = example
} else {
  n = 1
}
// ç®€åŒ–ä»£ç 
n = example || 1
```

### `~`ä½è¿ç®—ç¬¦

```js
const b = ~~1.5 // 1
const c = ~1.2 // -2
```

## æ•°æ®ä¼ é€’

JavaScript ä¸­åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå¦‚æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ã€nullã€undefinedï¼‰æ˜¯æŒ‰å€¼ä¼ é€’çš„ï¼Œè€Œå¯¹è±¡å’Œæ•°ç»„æ˜¯æŒ‰å¼•ç”¨ä¼ é€’
**å‡½æ•°å†…éƒ¨çš„å‚æ•°æ˜¯æ–°çš„å±€éƒ¨å˜é‡ï¼Œç›´æ¥èµ‹å€¼ä¿®æ”¹å®ƒä»¬ä¸ä¼šå½±å“å¤–éƒ¨çš„å˜é‡å€¼**
**åœ¨å‡½æ•°é‡Œåªè¦ç»™å½¢å‚ç›´æ¥é‡æ–°èµ‹å€¼ï¼Œå½¢å‚å°±ä¼šå’Œå¤–éƒ¨çš„å€¼è„±ç¦»å…³è”ï¼Œä¸ä¼šå½±å“å¤–éƒ¨çš„å€¼**
**ä½†å¦‚æœåœ¨å½¢å‚æ˜¯å¼•ç”¨ç±»å‹æ•°æ®çš„æƒ…å†µä¸‹ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œåˆ™ä¼šé€šè¿‡å¼•ç”¨ä¼ é€’æ”¹å˜å¤–éƒ¨çš„å€¼**

```js
// ç›´æ¥èµ‹å€¼ä¿®æ”¹å½¢å‚ï¼Œä¸å½±å“å¤–éƒ¨å€¼
let a = 1
let b = { n: 2 }
function exchange(a, b) {
  const temp = a
  a = b
  b = temp
}
exchange(a, b) // a = 1, b = { n: 2 }

// ä¿®æ”¹æŸä¸€ä¸ªå±æ€§æˆ–ä¸‹æ ‡ç´¢å¼•çš„å€¼ï¼Œé€šè¿‡å¼•ç”¨ä¼ é€’æ”¹å˜å¤–éƒ¨çš„å€¼
let a = { n: 1 }
let b = [0, 3, a]
function change(a, b) {
  a.n++
  b[1]--
}
change(a, b) // a = { n: 2 }, b = [0, 2, { n: 2 }]
```

## ä½œç”¨åŸŸ

JS æœ‰ä¸¤ç§ä½œç”¨åŸŸï¼šå…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸ

- å†…éƒ¨çš„ä½œç”¨åŸŸèƒ½è®¿é—®å¤–éƒ¨ï¼Œåä¹‹ä¸è¡Œï¼Œè®¿é—®æ—¶ä»å†…å‘å¤–ä¾æ¬¡æŸ¥æ‰¾
- å¦‚æœåœ¨å†…éƒ¨çš„ä½œç”¨åŸŸä¸­è®¿é—®äº†å¤–éƒ¨ï¼Œåˆ™ä¼šäº§ç”Ÿé—­åŒ…
- **å†…éƒ¨ä½œç”¨åŸŸèƒ½è®¿é—®çš„å¤–éƒ¨ç¯å¢ƒï¼Œå–å†³äºå‡½æ•°å®šä¹‰çš„ä½ç½®ï¼Œ å’Œå‡½æ•°è°ƒç”¨æ— å…³**
- ä½œç”¨åŸŸå†…å®šä¹‰çš„å˜é‡ï¼ˆä½¿ç”¨`var`å£°æ˜ï¼‰ã€å‡½æ•°å£°æ˜ä¼šæå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨

```js
console.log(a, b, c) // è¾“å‡º undefined undefined [Function: c]
var a = 1
var b = function () {} // æ­¤å†™æ³•ä¸º å‡½æ•°è¡¨è¾¾å¼ï¼Œå¹¶ä¸æ˜¯å‡½æ•°å£°æ˜ï¼Œä¸ä¼šè¢«æå‡
function c() {}

// ç›¸å½“äºä»¥ä¸‹å†™æ³•
var a
var b
function c() {} // å‡½æ•°å£°æ˜è¢«æå‡
console.log(a, b, c) // a å’Œ b è¢«æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨ï¼Œä½†å¹¶æœªèµ‹å€¼ï¼Œæ‰€ä»¥è¾“å‡º undefinedï¼Œè€Œä¸æ˜¯æŠ¥é”™
a = 1 // èµ‹å€¼å¹¶ä¸ä¼šä¸€èµ·è¢«æå‡ï¼Œåªæå‡å˜é‡çš„å®šä¹‰
b = function () {}
```

## å…¨å±€å¯¹è±¡

æ— è®ºæ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œè¿˜æ˜¯ node ç¯å¢ƒï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªå…¨å±€å¯¹è±¡
æµè§ˆå™¨ç¯å¢ƒï¼š`window`ï¼›node ç¯å¢ƒï¼š`global`
å…¨å±€å¯¹è±¡çš„ç‰¹ç‚¹ï¼š

- å…¨å±€å¯¹è±¡çš„å±æ€§å¯ä»¥ç›´æ¥è¢«è®¿é—®
- ç»™æœªå£°æ˜çš„å˜é‡èµ‹å€¼ï¼Œå®é™…å°±æ˜¯ç»™å…¨å±€å¯¹è±¡çš„å±æ€§èµ‹å€¼ï¼Œä¸ç®¡æ˜¯å…¨å±€ä½œç”¨åŸŸè¿˜æ˜¯å‡½æ•°ä½œç”¨åŸŸï¼ŒDon't do that
- æ‰€æœ‰çš„å…¨å±€å˜é‡ã€å…¨å±€å‡½æ•°ï¼Œéƒ½ä¼šé™„åŠ åˆ°å…¨å±€å¯¹è±¡èº«ä¸Šï¼Œç§°ä¹‹ä¸º**å…¨å±€æ±¡æŸ“**

ä¸ºäº†é¿å…å…¨å±€æ±¡æŸ“ï¼Œåœ¨å‡½æ•°çš„å‡½æ•°ä½œç”¨åŸŸå†…å£°æ˜å˜é‡ï¼Œä½†ä¸ºäº†é¿å…æ›´ç¹çï¼Œå°±å‡ºç°äº†**ç«‹å³æ‰§è¡Œå‡½æ•°**
ç«‹å³æ‰§è¡Œå‡½æ•°ç§°ä¹‹ä¸º`IIFE`ï¼Œå…¨ç§°æ˜¯`Immediately Invoked Function Expression`
**ç«‹å³æ‰§è¡Œå‡½æ•°é€šå¸¸ç”¨äºå¼ºè¡Œæ”¹å˜ä½œç”¨åŸŸ**

```js
var exposure = (function () {
  // console.log(this) // å…¨å±€å¯¹è±¡
  const a = 1 // å¤„åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ï¼Œä¸”æ²¡æœ‰è¿”å›æš´éœ²å‡ºå»ï¼Œæ‰€ä»¥ä¸ä¼šæ±¡æŸ“å…¨å±€
  const b = 2
  function sum(a, b) {
    return a + b
  }
  return {
    sum
  }
})()
console.log(exposure) // { sum: [Function: sum] }
// å› ä¸º exposure å…¨å±€å£°æ˜å¹¶æ¥å—äº†è¿”å›å€¼ï¼Œå…¶ä»–JSæ–‡ä»¶å°±å¯ä»¥è®¿é—®åˆ° exposure.sum å‡½æ•°
// ä½†æ˜¯ a å’Œ b åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ï¼Œä¸”æ²¡æœ‰è¿”å›ï¼Œå‡½æ•°ä¹‹å¤–è®¿é—®ä¸åˆ°ï¼Œæå¤§åœ°é™ä½äº†å…¨å±€æ±¡æŸ“
```

## æ„é€ å‡½æ•°

**åœ¨JSè¯­è¨€ä¸­ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯é€šè¿‡`new`äº§ç”Ÿçš„**
åœ¨ ES6 ä¹‹åä½¿ç”¨`class`ä»£æ›¿è¿™ä¸­å†™æ³•å»åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡
**å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡**

```js
// ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªå¯¹è±¡
function Person(age, name) {
  this.age = age
  this.name = name
  this.sayHello = function () {
    console.log(`${this.name} say hello`)
  }
}
const p = new Person(26, 'Kyle') // ä½¿ç”¨ new å…³é”®è¯ï¼Œåˆ™ä»£è¡¨ç”¨æ„é€ å‡½æ•°çš„æ–¹å¼è°ƒç”¨å‡½æ•°
```

## åŸå‹

æ¯ä¸ªå‡½æ•°éƒ½ä¼šè‡ªåŠ¨é™„å¸¦ä¸€ä¸ªå±æ€§`prototype`ï¼Œè¿™ä¸ªå±æ€§çš„å€¼æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œç§°ä¹‹ä¸º**åŸå‹å¯¹è±¡**
é€šè¿‡`new`æ„é€ å‡½æ•°äº§ç”Ÿçš„å¯¹è±¡ç§°ä¹‹ä¸º**å®ä¾‹**
ç”±äºåœ¨JSä¸­æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯é€šè¿‡`new`æ„é€ å‡½æ•°äº§ç”Ÿçš„ï¼Œå› æ­¤ï¼Œä¸¥æ ¼æ¥è¯´ï¼Œ**JSä¸­çš„æ‰€æœ‰å¯¹è±¡éƒ½ç§°ä¹‹ä¸ºå®ä¾‹**

![image-20250516185831590](./assets/image-20250516185831590.png)

æ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§`__proto__`ï¼Œç§°ä¹‹ä¸º**éšå¼åŸå‹**ï¼Œå®ƒæŒ‡å‘å®ä¾‹çš„æ„é€ å‡½æ•°çš„åŸå‹
è¿™ä¸€åˆ‡æœ‰ä½•æ„ä¹‰ï¼Ÿ
**å½“è®¿é—®å®ä¾‹çš„å±æ€§æˆå‘˜æ—¶ï¼Œå…ˆæ‰¾è‡ªèº«ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ²¿ç€åŸå‹é“¾ä»éšå¼åŸå‹`__proto__`ä¸­å¯»æ‰¾**
**è¿™æ ·ä¸€æ¥ï¼Œå°±å¯ä»¥å°†é‚£äº›å…¬å…±æˆå‘˜ï¼Œæ”¾åˆ°å‡½æ•°çš„åŸå‹å¯¹è±¡ä¸­ï¼Œå³å¯è¢«åˆ›å»ºçš„æ‰€æœ‰å®ä¾‹å…±äº«è®¿é—®**

```js
// ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªå¯¹è±¡
function Person(age, name) {
  this.age = age
  this.name = name
}
// å°† sayHello æ–¹æ³•æ”¾åœ¨ Person çš„åŸå‹å¯¹è±¡ä¸Š
// åˆ™æ‰€æœ‰é€šè¿‡ new Person äº§ç”Ÿçš„å®ä¾‹éƒ½å¯ä»¥é€šè¿‡éšå¼åŸå‹è®¿é—®åˆ° sayHello æ–¹æ³•
Person.prototype.sayHello = function () {
  console.log(`${this.name} say hello`)
}
const p = new Person(26, 'Kyle')
p.sayHello()
```

## åŸå‹é“¾

```js
Object.prototype.__proto__ // null, æ¯”è¾ƒç‰¹æ®Šï¼Œå›ºå®šæŒ‡å‘ null
Function.prototype === Function.__proto__ // trueï¼Œ æ¯”è¾ƒç‰¹æ®Š
// å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„å±æ€§
```

![image-20250520160323994](./assets/image-20250520160323994.png)

![image-20250520154944582](./assets/image-20250520154944582.png)

**æ›´æ”¹æ„é€ å‡½æ•°çš„åŸå‹ä¼šå¯¹æ‰€æœ‰åŸå‹é“¾ä¸Šæœ‰è¯¥æ„é€ å‡½æ•°çš„åŸå‹çš„å¯¹è±¡äº§ç”Ÿå½±å“**

```js
// 1. åˆ©ç”¨åŸå‹é“¾æ¥åˆ¤æ–­æ•°æ®çš„ç±»å‹

// obj instanceof constructor åˆ¤æ–­å‰è€…çš„åŸå‹é“¾ä¸­ï¼Œæ˜¯å¦å­˜åœ¨åè€…çš„åŸå‹
[1, 2] instanceof Array
// trueï¼Œå› ä¸º[1ï¼Œ 2].__proto__ === Array.prototype
[1, 2] instanceof Object
// trueï¼Œå› ä¸º Array.prototype.__proto__ === Object.prototypeï¼Œ
// æ‰€ä»¥ [1, 2].__proto__.__proto__ === Object.prototype
const obj = { a: 1 }
obj instanceof Object
// trueï¼Œå› ä¸º obj.__proto__ === Object.prototype
obj instanceof Array
// false


// 2. åˆ›å»ºç©ºåŸå‹çš„å¯¹è±¡

// Object.create()ï¼Œå¤šç”¨æ¥åˆ›å»ºä¸€ä¸ªæ²¡æœ‰éšå¼åŸå‹çš„å¹²å‡€çš„å¯¹è±¡
const obj = Object.create(null)
// åˆ™ obj.__proto__ === nullï¼Œä½†æ˜¯ä¸è¦ç›´æ¥è¿™æ ·å»å†™

// Object.setPrototypeOf(obj, proto)ï¼Œè®¾ç½®å¯¹è±¡çš„éšå¼åŸå‹å¯¹è±¡
const a = {a: 1}
Object.setPrototypeOf(a, null)
// åˆ™ a.__proto__ === null
```

## Web API

å’Œæ ‡å‡†åº“ä¸åŒï¼Œ`WebAPI`æ˜¯æµè§ˆå™¨æä¾›çš„ä¸€å¥—APIï¼Œç”¨äºæ“ä½œæµè§ˆå™¨çª—å£å’Œç•Œé¢

![image-20250527153633805](./assets/image-20250527153633805.png)

### BOM

`Browser Object Model`ï¼Œæµè§ˆå™¨æ¨¡å‹ï¼Œæä¾›å’Œæµè§ˆå™¨ç›¸å…³çš„æ“ä½œ

```js
// åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œåˆ™æœ‰ä¸€ä¸ª window çš„å…¨å±€å¯¹è±¡
window.open() // æ‰“å¼€ä¸€ä¸ªæ–°çš„æµè§ˆå™¨çª—å£ï¼Œè¿”å›æ–°çª—å£çš„ window å…¨å±€å¯¹è±¡
window.close() // å…³é—­ç”± open æ–¹æ³•æ‰“å¼€çš„æµè§ˆå™¨çª—å£
setTimeout(callback, time) // è®¾ç½®ä¸€ä¸ªå»¶æ—¶å®šæ—¶å™¨ï¼Œtime[ms]åæ‰§è¡Œcallbackï¼Œè¿”å›è®¡æ—¶å™¨çš„ id
clearTimeout() // æ ¹æ® id æ¸…é™¤å»¶æ—¶å®šæ—¶å™¨
setInterval(callback, time) // è®¾ç½®ä¸€ä¸ªå¾ªç¯å®šæ—¶å™¨ï¼Œæ¯éš”time[ms]æ‰§è¡Œä¸€æ¬¡callbackï¼Œè¿”å›è®¡æ—¶å™¨çš„ id
clearInterval() // æ ¹æ® id æ¸…é™¤å¾ªç¯å®šæ—¶å™¨
alert() // å¼¹å‡ºæç¤ºæ¡†
confirm() // ç¡®è®¤æ¡†
... ...

// window.location
// æä¾›å’Œåœ°å€æ ç›¸å…³çš„æ“ä½œ
location.href = 'www.baidu.com' // å¯ä»¥è¯»å–å½“å‰åœ°å€æ åœ°å€ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ï¼Œåˆ™æœ¬çª—å£è·³è½¬åˆ°æ–°åœ°å€
location.protocol // è·å–æˆ–è®¾ç½®åœ°å€æ ä¸­çš„åè®®éƒ¨åˆ†ï¼Œå¦‚`http`æˆ–`https`
location.host // è·å–æˆ–è®¾ç½®åœ°å€ä¸­çš„ä¸»æœºåŠç«¯å£å·ï¼Œå¦‚`localhost:3000`
location.port // è·å–æˆ–è®¾ç½®åœ°å€ä¸­çš„ç«¯å£å·ï¼Œå¦‚ `3000`
location.pathname // è·å–æˆ–è®¾ç½®åœ°å€ä¸­çš„è·¯å¾„éƒ¨åˆ†ï¼Œå¦‚`www.bilibili.com/history`ä¸­çš„`/history`éƒ¨åˆ†
location.hash // è·å–æˆ–è®¾ç½®åœ°å€ä¸­çš„hashéƒ¨åˆ†ï¼Œå¦‚`http://localhost:18090/#/home`ä¸­çš„`#/home`éƒ¨åˆ†
location.reload() // é‡è½½åˆ·æ–°é¡µé¢
... ...

// window.history
// æä¾›å½“å‰çª—å£å†å²è®°å½•ç›¸å…³çš„æ“ä½œ
history.back() // åé€€
history.forward() // å‰è¿›
history.go(offset_number) // æ ¹æ®ç›¸å¯¹äºå½“å‰é¡µé¢çš„åç§»é‡ï¼Œè¿›å…¥å†å²è®°å½•ä¸­æŒ‡å®šé¡µé¢
history.pushState() // åœ¨å†å²è®°å½•ä¸­æ·»åŠ ä¸€æ¡è®°å½•ï¼Œé¡µé¢ä¸åˆ·æ–°
history.replaceState() // æ›¿æ¢å½“å‰çš„è®°å½•ï¼Œé¡µé¢ä¸åˆ·æ–°
```

### DOM

`Document Object Model`ï¼Œæ–‡æ¡£æ¨¡å‹ï¼Œæä¾›å’Œé¡µé¢ç›¸å…³çš„æ“ä½œ
å®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹åº”ç€ html ä¸­çš„èŠ‚ç‚¹å’Œæ ‡ç­¾

![image-20250527164809196](./assets/image-20250527164809196.png)

```js
[document | dom].querySelector('.container') // é€šè¿‡cssé€‰æ‹©å™¨è·å–ä¸€ä¸ªåŒ¹é…çš„domå¯¹è±¡
[document | dom].querySelectorAll('.div') // å¾—åˆ°æ‰€æœ‰åŒ¹é…çš„domä¼ªæ•°ç»„

// æ›´æ”¹ dom ç»“æ„
dom.remove() // ä»domæ ‘ç§ç§»é™¤è‡ªèº«
dom.removeChild(node) // åˆ é™¤domçš„å­èŠ‚ç‚¹
dom.insertBefore(node) // åœ¨domçš„å­èŠ‚ç‚¹ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„å­èŠ‚ç‚¹åˆ°å¦ä¸€ä¸ªå­èŠ‚ç‚¹ä¹‹å‰
dom.appendChild(node) // æ·»åŠ ä¸€ä¸ªæ–°çš„å­èŠ‚ç‚¹åœ¨domçš„å­èŠ‚ç‚¹æœ«å°¾

// ç›‘å¬ dom çš„äº‹ä»¶
dom.onclick = function() {} // ç‚¹å‡»äº‹ä»¶
dom.oncontextmenu // å³é”®èœå•æ˜¾ç¤ºå‰è§¦å‘å›è°ƒ
dom.onmouseenter // é¼ æ ‡è¿›å…¥å…ƒç´ æ—¶è§¦å‘ï¼ˆä¸å†’æ³¡ï¼‰
dom.onmouseleave // é¼ æ ‡ç¦»å¼€å…ƒç´ æ—¶è§¦å‘ï¼ˆä¸å†’æ³¡ï¼‰
dom.onmouseover // é¼ æ ‡è¿›å…¥å…ƒç´ æ—¶è§¦å‘ï¼ˆå†’æ³¡ï¼‰
dom.onmouseout // é¼ æ ‡ç¦»å¼€å…ƒç´ æ—¶è§¦å‘ï¼ˆä¸å†’æ³¡ï¼‰
window.onwheel // é¼ æ ‡æ»šè½®æ»šåŠ¨æ—¶è§¦å‘

// é”®ç›˜äº‹ä»¶
window.keydown // é”®ç›˜æŒ‰ä¸‹æ—¶è§¦å‘
window.keyup // é”®ç›˜æŠ¬èµ·æ—¶è§¦å‘
```

äº‹ä»¶ä¼ æ’­æœºåˆ¶

![image-20250528190331804](./assets/image-20250528190331804.png)

äº‹ä»¶å§”æ‰˜

```js
// è·å–çˆ¶å…ƒç´ 
const container = document.querySelector('.container')
// ç›´æ¥å°†äº‹ä»¶æ³¨å†Œåœ¨çˆ¶å…ƒç´ ä¸Šï¼Œé€šè¿‡å†’æ³¡æœºåˆ¶
container.onclick = function(e) {
  if (e.target.tagName === 'BUTTON') {
    console.log('click')
  }
}
// 1. é¿å…æœ‰å¤§é‡å­å…ƒç´ æ—¶ï¼Œéœ€è¦ä¾æ¬¡åœ¨å­å…ƒç´ ä¸Šæ³¨å†Œäº‹ä»¶ï¼Œæå‡æ•ˆç‡å’Œæ€§èƒ½
// 2. é¿å…åŠ¨æ€çš„å­å…ƒç´ æ·»åŠ è¿›æ¥æ—¶ï¼Œéœ€è¦å†æ¬¡ä¸ºæ–°çš„å­å…ƒç´ æ³¨å†Œäº‹ä»¶
```

## åœ¨å¾ªç¯ä¸­æ³¨å†Œäº‹ä»¶

```js
for (var i = 0; i < 3; i++) {
	setTimeout(() => {
		console.log(i)
	}, 1000)
}
/**
* æ­¤æ—¶ è¾“å‡ºçš„æ˜¯ 3 3 3
* åŸå› ï¼š
* 1. var çš„å˜é‡æå‡ ï¼šä½¿ç”¨ var å£°æ˜çš„å˜é‡ä¼šå­˜åœ¨å‡½æ•°çº§ä½œç”¨åŸŸï¼Œå¾ªç¯ä¸­çš„ i å…¶å®æ˜¯åŒä¸€ä¸ªå˜é‡
* 2. é—­åŒ…æ•è·å»¶è¿Ÿ ï¼šæ‰€æœ‰ setTimeout å›è°ƒå‡½æ•°éƒ½å…±äº«åŒä¸€ä¸ª i çš„å¼•ç”¨
* 3. å¾ªç¯æ‰§è¡Œå®Œæ¯• ï¼šå½“å›è°ƒæ‰§è¡Œæ—¶ï¼Œå¾ªç¯æ—©å·²ç»“æŸï¼Œæ­¤æ—¶ i çš„å€¼å·²ç»æ˜¯ 3
**/

for (let i = 0; i < 3; i++) {
	setTimeout(() => {
		console.log(i)
	}, 1000)
}
/**
* è§£å†³æ–¹æ¡ˆä¸€ï¼š ä½¿ç”¨ let
* 1. let ä¼šåœ¨æ¯æ¬¡å¾ªç¯åˆ›å»ºæ–°çš„å—çº§ä½œç”¨åŸŸ
* 2. æ¯ä¸ª setTimeout å›è°ƒéƒ½ä¼šæ•è·å½“å‰å¾ªç¯çš„ç‹¬ç«‹ i
* 3. å³ä½¿å»¶è¿Ÿæ‰§è¡Œï¼Œä¹Ÿèƒ½ä¿æŒæ­£ç¡®çš„å€¼
**/

for (var i = 0; i < 3; i++) {
  (function (currentI) {
    setTimeout(() => {
      console.log(currentI) // è¾“å‡º 0, 1, 2
    }, 1000)
  })(i)
}
/**
* è§£å†³æ–¹æ¡ˆäºŒï¼š ä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰
* 1. é€šè¿‡ (function(currentI){})(i) åœ¨æ¯æ¬¡å¾ªç¯æ—¶åˆ›å»ºæ–°çš„å‡½æ•°ä½œç”¨åŸŸ
* 2. å°†å¾ªç¯å˜é‡ i ä½œä¸ºå‚æ•° currentI ä¼ å…¥ï¼Œæ¯æ¬¡å¾ªç¯éƒ½ä¼šåˆ›å»ºæ–°çš„å˜é‡å‰¯æœ¬
* 3. æ¯ä¸ª setTimeout å›è°ƒéƒ½æ•è·ç‹¬ç«‹çš„ currentI å˜é‡
**/
```

## ç®­å¤´å‡½æ•°`() => {}`

- ä¸èƒ½ä½¿ç”¨`new`å…³é”®è¯è°ƒç”¨

- æ²¡æœ‰åŸå‹ï¼Œå³æ²¡æœ‰`prototype`å±æ€§

- æ²¡æœ‰è‡ªå·±çš„`arguments`ï¼Œè·å–çš„å¤–éƒ¨å‡½æ•°çš„

- æ²¡æœ‰`this`

  ~~ç®­å¤´å‡½æ•°çš„`this`æ°¸è¿œæŒ‡å‘å‡½æ•°å®šä¹‰ä½ç½®çš„`this`ï¼Œå› ä¸ºç®­å¤´å‡½æ•°ä¼šç»‘å®š`this`~~ï¼Œè¿™ä¸ªè¯´æ³•æ˜¯é”™è¯¯çš„
  æ ¹æœ¬åŸå› æ˜¯ç®­å¤´å‡½æ•°å®ƒæ²¡æœ‰`this`ï¼Œå‡½æ•°é‡Œä½¿ç”¨çš„`this`æ˜¯å¤–å±‚çš„`this`

## å‰©ä½™å‚æ•°`...args`

ES6åä¸å†å»ºè®®ä½¿ç”¨`arguments`æ¥è·å–å‚æ•°åˆ—è¡¨ï¼Œæ¨èä½¿ç”¨`...args`æ¥è·å–æœªçŸ¥æ•°é‡çš„å‚æ•°
```js
function method(a, b, ...args) {
  console.log(a, b, ...args)
}
method(1, 2, 3, 4, 5) // 1, 2, [3, 4, 5]
method(1, 2) // 1, 2, []
```

## `ES Module`

å®˜æ–¹æ ‡å‡†çš„jsæ¨¡å—åŒ–ï¼Œæ”¯æŒ`NodeJs`å’Œæµè§ˆå™¨ç¯å¢ƒï¼Œæ”¯æŒé™æ€å¯¼å…¥å’ŒåŠ¨æ€å¯¼å…¥
`ES Module`åˆ†ä¸ºä¸¤ç§å¯¼å‡ºæ–¹å¼ï¼šå…·åå¯¼å‡ºï¼ˆæ™®é€šå¯¼å‡ºï¼Œå¯ä»¥å¯¼å‡ºå¤šä¸ªï¼‰ã€é»˜è®¤å¯¼å‡ºï¼ˆåªèƒ½å¯¼å‡ºä¸€ä¸ªï¼‰
**ä¸€ä¸ªæ¨¡å—å¯ä»¥åŒæ—¶å­˜åœ¨ä¸¤ç§å¯¼å‡ºæ–¹å¼ï¼Œæœ€ç»ˆéƒ½ä¼šåˆå¹¶ä¸ºä¸€ä¸ªæ¨¡å—å¯¹è±¡å¯¼å‡º**

> [!NOTE]
>
> - é™æ€å¯¼å…¥å¿…é¡»å†™åœ¨ä»£ç é¡¶ç«¯ï¼Œä¸å¯æ”¾å…¥ä»£ç å—ä¸­
> - é™æ€å¯¼å…¥çš„å˜é‡ç»‘å®šæ˜¯å¸¸é‡ï¼Œä¸å¯æ›´æ”¹

```js
// module.js
export const a = 1
export const b = 2
export function sum(a, b) {
  return a + b
}
export default {
  name: 'Kyle',
  age: 26,
}

/**
 * å¯¼å‡ºçš„æ¨¡å—å¯¹è±¡ï¼š
 {
 	a,
 	b,
 	sum,
 	default
 }
**/
```

```js
// å¯¼å…¥æ¨¡å—

// 1. ä»…å¯¼å…¥ default
import info from './module.js'
// 2. ä»…å¯¼å…¥ a å’Œ b
import { a, b } from './module.js'
// 3. åŒæ—¶å¯¼å…¥ defaultã€aã€b
import info, { a, b } from './module.js'
// 4. å¯¼å…¥æ•´ä¸ªæ¨¡å—
import * as obj from './module.js'
// 5. ä¸å¯¼å…¥ä»»ä½•ä¸œè¥¿ï¼Œä»…è¿è¡Œä¸€æ¬¡æ¨¡å—
import './module.js'
```



# `CSS`è¡¥å……



## `label`æ ‡ç­¾

```html
<div class="container">
  <!-- é€šè¿‡ id ç›¸å…³è” -->
  <input type="radio" name="gender" id="male" value="male" />
  <label for="male">Male</label>

  <!-- ç›´æ¥ç”¨ label å…ƒç´ åŒ…è£¹ï¼Œé‡Œé¢çš„å…ƒç´ åˆ™ä¼šè‡ªåŠ¨å…³è” -->
  <label>
    <input type="radio" name="gender" id="female" value="female" />
    <span>Female</span>
  </label>
</div>
```

## `vertical-align`

åœ¨ç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ çš„`display`å±æ€§å€¼ä¸º`inline`æˆ–è€…`inline-block`çš„å‰æä¸‹ï¼Œå¦‚å­˜åœ¨å…ƒç´ ä¸Šä¸‹ä¸å¯¹é½çš„æƒ…å†µ
ä½¿ç”¨`vertical-align`å±æ€§æ¥è°ƒæ•´

```css
vertical-align: 4px;
```

## `border`å’Œ`outline`

`outline`ä¸å ç”¨å…ƒç´ çš„ç›’å°ºå¯¸ï¼Œåªæœ‰æ˜¾ç¤ºæ•ˆæœï¼Œä½†`border`ä¼šå‚ä¸åˆ°ç›’å°ºå¯¸çš„è®¡ç®—ä¸­

## å±æ€§å€¼è®¡ç®—è¿‡ç¨‹

æ‰€æœ‰çš„HTMLå…ƒç´ ï¼Œä»»ä½•ä¸€ä¸ªå…ƒç´ å¿…é¡»è¦æ¯ä¸€ä¸ªCSSå±æ€§å…¨éƒ¨éƒ½è¦æœ‰å€¼ï¼Œæµè§ˆå™¨æ‰çŸ¥é“å¦‚ä½•æ˜¾ç¤ºå®ƒ
æ²¡æœ‰ä¹¦å†™çš„å±æ€§å€¼ï¼Œå¹¶ä¸ä»£è¡¨è¿™ä¸ªå…ƒç´ æ²¡æœ‰è¿™ä¸ªCSSå±æ€§å’Œå€¼ï¼Œæµè§ˆå™¨æœ‰é»˜è®¤çš„å€¼

![image-20250513095647264](./assets/image-20250513095647264.png)

æµè§ˆå™¨è°ƒè¯•å·¥å…·ä¸­çš„`Computed`å¯ä»¥çœ‹åˆ°é€‰ä¸­å…ƒç´ çš„**æœ€ç»ˆè®¡ç®—æ ·å¼**

1. ç¡®å®šå£°æ˜å€¼

   å‚è€ƒæ ·å¼è¡¨ä¸­æ²¡æœ‰å†²çªçš„å£°æ˜ï¼Œä½œä¸ºCSSå±æ€§å€¼ï¼Œè¿™ä¸€æ­¥æœ‰å†²çªé‡å¤å£°æ˜çš„å±æ€§ä¸ä¼šå¤„ç†ç¡®å®šæœ€ç»ˆå€¼

2. å±‚å å†²çª

   å¯¹æ ·å¼è¡¨ä¸­æœ‰å†²çªçš„å£°æ˜ä½¿ç”¨å±‚å è§„åˆ™ï¼Œç¡®å®šCSSå±æ€§å€¼

   - æ¯”è¾ƒé‡è¦æ€§ï¼Œç”¨æˆ·ä¹¦å†™æ ·å¼å¤§äºæµè§ˆå™¨é»˜è®¤æ ·å¼
   - æ¯”è¾ƒç‰¹æ®Šæ€§ï¼Œæƒé‡æ¯”è¾ƒ
   - æ¯”è¾ƒæ¬¡åºæ€§ï¼Œåé¢çš„ä¼šè¦†ç›–å‰é¢çš„æ ·å¼

3. ä½¿ç”¨ç»§æ‰¿

   å¯¹ä»ç„¶æ²¡æœ‰å€¼çš„å±æ€§ï¼Œè‹¥å¯ä»¥ç»§æ‰¿ï¼Œåˆ™ç»§æ‰¿å¤å…ƒç´ çš„å€¼

4. ä½¿ç”¨é»˜è®¤å€¼

   å¯¹ä»ç„¶æ²¡æœ‰å€¼çš„å±æ€§ï¼Œä½¿ç”¨æµè§ˆå™¨çš„é»˜è®¤å€¼

## ä¼ªç±»é€‰æ‹©å™¨

```css
/* æ²¡æœ‰è®¿é—®è¿‡çš„è¶…é“¾æ¥ */
a: link {}
/* å·²è®¿é—®è¿‡çš„è¶…é“¾æ¥ */
a: visited {}
: hover {}
/* é¼ æ ‡æŒ‰ä¸‹ */
: active {}
/* èšç„¦çš„è¡¨å•å…ƒç´  */
: focus {}
/* ç¦ç”¨çš„è¡¨å•å…ƒç´  */
: disabled {}
/* xaun'zhong */
: checked {}
: first-child {}
: last-child {}
/* é€‰ä¸­ an+b ä¸ªå­å…ƒç´ ï¼Œaã€bæ˜¯å¸¸é‡ï¼Œn çš„å€¼ä» 0 å¼€å§‹é€’å¢*/
: nth-child(an+b) {}
```

## å…ƒç´ éšè—æ˜¾ç¤º

```css
/* dom å…ƒç´ ç›’å­ä¹Ÿä¼šæ¶ˆå¤± */
display: none;
/* ä¸å¯è§ï¼Œæœ‰ dom å…ƒç´ ï¼Œä½†æ˜¯ä¸èƒ½è§¦å‘äº‹ä»¶ */
visibility: visible;
/* é€æ˜åº¦ä¸º0ï¼Œæœ‰ dom å…ƒç´ ï¼Œå¯è¢«è§¦å‘äº‹ä»¶ */
opacity: 0;
```

