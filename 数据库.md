# Waht Can It  Do?

- æŒä¹…çš„å­˜å‚¨æ•°æ®ï¼Œå­˜å‚¨åœ¨ç¡¬ç›˜æ–‡ä»¶ä¸­
- å¤‡ä»½å’Œæ¢å¤æ•°æ®
- å¿«é€Ÿçš„å­˜å–æ•°æ®
- æƒé™æŽ§åˆ¶



# æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç±»åž‹



## å…³ç³»åž‹

è¡¨å°±æ˜¯å…³ç³»ï¼Œæˆ–è€…è¯´è¡¨ä¸Žè¡¨ä¹‹é—´å­˜åœ¨å…³ç³»ï¼Œä»¥è¡¨å’Œè¡¨çš„å…³è”æž„æˆçš„æ•°æ®ç»“æž„
æ‰€æœ‰çš„å…³ç³»åž‹æ•°æ®åº“éƒ½éœ€è¦é€šè¿‡`SQL`ç»“æž„åŒ–æŸ¥è¯¢è¯­è¨€æ¥æ“ä½œï¼Œä¸”åœ¨æ“ä½œä¹‹å‰éƒ½éœ€è¦è®¾è®¡è¡¨ç»“æž„
`SQL`ï¼šç”¨äºŽè®¿é—®å’Œå¤„ç†æ•°æ®åº“çš„æ ‡å‡†çš„è®¡ç®—æœºè¯­è¨€

å…³ç³»åž‹æ•°æ®åº“çš„ä¼˜ç¼ºç‚¹ï¼š

- **ä¼˜ç‚¹**ï¼šèƒ½è¡¨è¾¾å¤æ‚çš„æ•°æ®å…³ç³»ï¼Œå¼ºå¤§çš„æŸ¥è¯¢è¯­è¨€ï¼Œèƒ½ç²¾ç¡®æŸ¥æ‰¾æƒ³è¦çš„æ•°æ®
- **ç¼ºç‚¹**ï¼šè¯»å†™æ€§èƒ½è¾ƒå·®ï¼Œå°¤å…¶æ˜¯æµ·é‡æ•°æ®çš„è¯»å†™ï¼Œæ•°æ®ç»“æž„æ¯”è¾ƒæ­»æ¿

æ‰€ä»¥ï¼Œå…³ç³»åž‹æ•°æ®åº“å¸¸ç”¨äºŽ**å­˜å‚¨ç»“æž„å¤æ‚éœ€ç²¾ç¡®æŸ¥æ‰¾çš„æ•°æ®**

å…³ç³»åž‹**æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ`DBMS`**ä»£è¡¨ï¼š`Oracle`ã€`MySql`ã€`Sql Server`



## éžå…³ç³»åž‹

æžå…¶ç®€å•çš„æ•°æ®å­˜å‚¨ç»“æž„ï¼šæ–‡æ¡£åž‹ã€é”®å€¼å¯¹åž‹

éžå…³ç³»åž‹æ•°æ®åº“çš„ä¼˜ç¼ºç‚¹ï¼š

- **ä¼˜ç‚¹**ï¼šæ ¼å¼çµæ´»ï¼Œæµ·é‡æ•°æ®è¯»å†™æ•ˆçŽ‡å¾ˆé«˜
- **ç¼ºç‚¹**ï¼šéš¾ä»¥è¡¨è¾¾å¤æ‚çš„æ•°æ®ç»“æž„ï¼Œå¯¹äºŽå¤æ‚æŸ¥è¯¢æ•ˆçŽ‡ä¸å¥½

ç”¨äºŽå‚¨å­˜ç»“æž„ç®€å•çš„æ•°æ®ï¼Œä¾‹å¦‚ï¼šç”¨æˆ·çš„è®¿é—®è®°å½•

éžå…³ç³»åž‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä»£è¡¨ï¼š`MongoDB`ã€`Redis`ã€`Membase`



# `SQL`

`Structured Query Language`ç»“æž„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œå¤§éƒ¨åˆ†å…³ç³»åž‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿéƒ½æ”¯æŒ`SQL`è¯­æ³•

- `DDL-Data Definition Language`æ•°æ®å®šä¹‰è¯­è¨€ï¼Œç”¨äºŽæ“ä½œæ•°æ®åº“å¯¹è±¡ï¼šåº“ã€è¡¨ã€è§†å›¾ã€å­˜å‚¨è¿‡ç¨‹
- `DML-Data Manipulation Language`æ•°æ®æ“æŽ§è¯­è¨€ï¼Œæ“ä½œæ•°æ®åº“ä¸­çš„è®°å½•
- `DCL-Data Control Language`æ•°æ®æŽ§åˆ¶è¯­è¨€ï¼ŒæŽ§åˆ¶ç”¨æˆ·æƒé™



# `MySql`

å…³ç³»åž‹æ•°æ®ç®¡ç†ç³»ç»Ÿï¼Œå¼€æºã€è½»é‡ã€å¿«é€Ÿ



## åˆå§‹åŒ–å®‰è£…

ä¸‹è½½äºŒè¿›åˆ¶å®‰è£…åŒ…`https://dev.mysql.com/downloads/mysql/5.5.html#downloads`ï¼Œå¹¶è§£åŽ‹åˆ°æƒ³è¦å®‰è£…çš„ç¡¬ç›˜ç›®å½•

åœ¨æ–‡ä»¶ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª`data`æ–‡ä»¶ï¼Œå†æ–°å»ºä¸€ä¸ª`my.ini`é…ç½®æ–‡ä»¶

```ini
[mysqld]
# è®¾ç½®3306ç«¯å£
port=3306
# è®¾ç½®mysqlçš„å®‰è£…ç›®å½•              æ³¨æ„ï¼šè¦ä½¿ç”¨åŒæ–œæ 
basedir=E:\\MySql-8.0.43
# è®¾ç½®mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½•
datadir=E:\\MySql-8.0.43\\data
# å…è®¸æœ€å¤§è¿žæŽ¥æ•°
max_connections=200
# å…è®¸è¿žæŽ¥å¤±è´¥çš„æ¬¡æ•°ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢æœ‰äººä»Žè¯¥ä¸»æœºè¯•å›¾æ”»å‡»æ•°æ®åº“ç³»ç»Ÿ
max_connect_errors=10
# æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸ºUTFMB4
character-set-server=utf8mb4
# åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“Ž
default-storage-engine=INNODB
# é»˜è®¤ä½¿ç”¨â€œmysql_native_passwordâ€æ’ä»¶è®¤è¯
default_authentication_plugin=mysql_native_password
[mysql]
# è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†
default-character-set=utf8mb4
[client]
# è®¾ç½®mysqlå®¢æˆ·ç«¯è¿žæŽ¥æœåŠ¡ç«¯æ—¶é»˜è®¤ä½¿ç”¨çš„ç«¯å£
port=3306
default-character-set=utf8mb4
```

åˆ›å»ºå…¨å±€ç³»ç»Ÿå˜é‡ï¼Œæ‰¾åˆ°çŽ¯å¢ƒå˜é‡ --> ç³»ç»Ÿå˜é‡ --> ä¸­çš„`PATH`ï¼Œæ–°å¢žä¸€ä¸ªè·¯å¾„`E:\MySql-8.0.43\bin`
æ­¤è·¯å¾„ä¸º`mysql`æ–‡ä»¶ä¸‹çš„`bin`æ–‡ä»¶ç›®å½•åœ°å€

ç®¡ç†å‘˜èº«ä»½æ‰“å¼€`powershell`ï¼Œå¹¶è¿›å…¥åˆ°`mysql`å®‰è£…ç›®å½•çš„`bin`ç›®å½•ä¸‹ï¼Œè¾“å…¥`cd E:\MySql-8.0.43\bin`

åˆå§‹åŒ–

```powershell
mysqld --initialize
```

å®‰è£…ï¼Œ`MySQL`å³ä¸ºæœåŠ¡åç§°ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¹¦å†™ï¼Œä½†æ˜¯åŽé¢è¦ä¿æŒä¸€æ ·

```powershell
mysqld --install MySQL
```

å¯åŠ¨&å…³é—­è¿›ç¨‹æœåŠ¡ï¼ŒæœåŠ¡åç§°å’Œå®‰è£…æ—¶ä¿æŒä¸€è‡´

```powershell
net start MySQL
net stop MySQL
```



## åŸºæœ¬å‘½ä»¤

ä½¿ç”¨rootè´¦æˆ·è¿žæŽ¥åˆ°æœåŠ¡å™¨

```powershell
mysql -uroot -p
# æ­¤æ­¥ä¼šéœ€è¦è¾“å…¥åˆå§‹å¯†ç ï¼Œå¯ä»¥åœ¨'data'ç›®å½•ä¸‹æ‰¾åˆ°åŽç¼€åæ˜¯'.err'çš„æ–‡ä»¶
```

![image-20250731143158018](./assets/image-20250731143158018.png)

`root@localhost`æ˜¯è´¦æˆ·åï¼Œå†’å·åŽé¢çš„`2ig93h?pAGzJ`å³ä¸ºåˆå§‹å¯†ç ï¼Œè¾“å…¥è¯¥å¯†ç åŽï¼Œå›žè½¦å³å¯

ä¿®æ”¹å¯†ç ï¼Œåœ¨å®žé™…å·¥ä½œä¸­å°½é‡ä½¿ç”¨å¼ºå¯†ç 

```mysql
ALTER USER 'root'@'localhost' IDENTIFIED BY 'new_password';
```

ä¿®æ”¹rootç”¨æˆ·çš„ç™»é™†æ–¹å¼ï¼Œå¯ä»¥ä»»æ„çš„è¿œç¨‹å®¢æˆ·ç«¯ç™»å½•ï¼Œå®žé™…å·¥ä½œä¸­ä¸è¦è¿™æ ·åš

```mysql
UPDATE mysql.user SET Host="%" where User="root";
```

åˆ·æ–°ä¿®æ”¹çš„æƒé™

```mysql
flush privileges;
```

æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„å­—ç¬¦ç¼–ç ï¼Œåœ¨`my.ini`æ–‡ä»¶ä¸­æ”¹æˆ`utf8mb4`æˆ–`utf8`

```mysql
show variables like 'character\_set\_%';
```

æŸ¥çœ‹å½“å‰æ‹¥æœ‰çš„æ•°æ®åº“

```mysql
show databases;
```

é€€å‡ºæ•°æ®åº“

```mysql
exit;
```

> [!NOTE]
>
> åœ¨`SQL`è¯­æ³•ä¸­ï¼Œä½¿ç”¨`;`åˆ†å·ç»“å°¾ï¼Œè¡¨ç¤ºè¯­å¥ç»“æŸ



## æ•°æ®åº“

ä½¿ç”¨`Navicat`è¿žæŽ¥æ•°æ®åº“åŽï¼Œæ–°å»ºä¸€ä¸ªæŸ¥è¯¢

```mysql
# è¯­æ³•ä¸­ä¸åŒºåˆ†å¤§å°å†™

# åˆ›å»ºä¸€ä¸ªæ•°æ®åº“
CREATE DATABASE `æ•°æ®åº“åç§°`;

# åˆ é™¤æ•°æ®åº“
DROP DATABASE `æ•°æ®åº“åç§°`;
```



## æ•°æ®è¡¨

### å­—æ®µç±»åž‹

- `bit`ï¼šå 1ä½ï¼Œ0æˆ–1ï¼Œfalseæˆ–true
- `int`ï¼šå 32ä½ï¼Œæ•´æ•°
- `decimal(M,N)`ï¼šèƒ½ç²¾ç¡®è®¡ç®—çš„å®žæ•°ï¼ŒMæ˜¯æ€»çš„æ•°å­—ä½æ•°ï¼ŒNæ˜¯å°æ•°éƒ¨åˆ†çš„ä½æ•°
- `char(n)`ï¼šå›ºå®šé•¿åº¦ä¸ºnçš„å­—ç¬¦
- `varchar(n)`ï¼šé•¿åº¦å¯å˜ï¼Œæœ€å¤§é•¿åº¦ä¸ºnçš„å­—ç¬¦
- `text`ï¼šå¤§é‡çš„å­—ç¬¦
- `data`ï¼šä»…æ—¥æœŸ
- `datetime`ï¼šæ—¥æœŸå’Œæ—¶é—´
- `time`ï¼šä»…æ—¶é—´

```mysql
# æ·»åŠ å­—æ®µscore ç±»åž‹ä¸ºdecimal(5,1) ä¸ä¸ºnull æŽ’åœ¨phoneå­—æ®µåŽ
ADD COLUMN `score` decimal(5, 1) NOT NULL AFTER `phone`;
```

### ä¸»é”®&å¤–é”®

**ä¸»é”®**ï¼šæ ¹æ®è®¾è®¡è¡¨çš„åŽŸåˆ™ï¼Œæ¯å¼ è¡¨éƒ½è¦æœ‰ä¸»é”®ï¼Œä¸”è¦æ±‚è¿™ä¸ªä¸»é”®æ˜¯å”¯ä¸€ã€ä¸èƒ½æ›´æ”¹ã€æ— ä¸šåŠ¡æ„ä¹‰çš„

**å¤–é”®**ï¼šç”¨äºŽäº§ç”Ÿè¡¨å…³ç³»çš„åˆ—ï¼Œå¤–é”®åˆ—ä¼šè¿žæŽ¥åˆ°å¦å¤–ä¸€å¼ è¡¨ï¼ˆæˆ–è‡ªå·±ï¼‰çš„ä¸»é”®ï¼Œä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå¤–é”®

### è¡¨å…³ç³»

- **ä¸€å¯¹ä¸€**ï¼šè¡¨çš„ä¸»é”®åŒæ—¶è®¾ç½®ä¸ºå¤–é”®ï¼Œä¾‹å¦‚ï¼šç”¨æˆ·è¡¨å’Œç”¨æˆ·ä¿¡æ¯è¡¨
- **ä¸€å¯¹å¤š**ï¼šåœ¨å¤šä¸€ç«¯è¡¨ä¸Šè®¾ç½®å¤–é”®ï¼Œå¯¹åº”åˆ°å¦ä¸€å¼ è¡¨çš„ä¸»é”®ï¼Œä¾‹å¦‚ï¼šç­çº§å’Œå­¦ç”Ÿï¼Œç”¨æˆ·å’Œæ–‡ç« 
- **å¤šå¯¹å¤š**ï¼šéœ€æ–°å»ºä¸€å¼ ä¸»å…³ç³»è¡¨ï¼Œå…³ç³»è¡¨è‡³å°‘åŒ…å«ä¸¤ä¸ªå¤–é”®ï¼Œåˆ†åˆ«å¯¹åº”åˆ°ä¸¤å¼ è¡¨ï¼Œä¾‹å¦‚ï¼šå­¦ç”Ÿå’Œè€å¸ˆ

### è®¾è®¡è§„èŒƒ

1. è¦æ±‚æ•°æ®åº“è¡¨çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŽŸå­æ•°æ®é¡¹
2. éžä¸»é”®åˆ—å¿…é¡»ä¾èµ–äºŽä¸»é”®åˆ—
3. éžä¸»é”®åˆ—å¿…é¡»ç›´æŽ¥ä¾èµ–ä¸»é”®åˆ—



## Use DML-å¢žåˆ æ”¹å·®`CRUD`

ä½¿ç”¨`DML-Data Manipulation Language`æ•°æ®åº“æ“æŽ§è¯­è¨€å®žçŽ°æ•°æ®è¡¨ä¸­è®°å½•çš„å¢žåˆ æ”¹å·®

### å¢žåŠ 

```sql
-- INSERT INTO `æ•°æ®åº“åç§°`.`è¡¨å`(è¯¥è¡¨ä¸­å·²æ·»åŠ çš„çš„å­—æ®µåï¼Œé™¤äº†è‡ªå¢žå­—æ®µï¼Œç”¨é€—å·éš”å¼€)
INSERT INTO `test`.`student`(name,age,gender,phone,classid)
-- å¦‚æžœå·²ç»åœ¨è¢«æ“ä½œçš„æ•°æ®åº“ä¸­ï¼Œ`æ•°æ®åº“åç§°`.å¯ä»¥çœç•¥ä¸å†™ï¼š
INSERT INTO `student`(name,age,gender,phone,classid)
-- VALUES(å¯¹åº”ä¸Šå„ä¸ªå­—æ®µçš„å€¼ï¼Œç”¨é€—å·éš”å¼€);
VALUES('Kyle',26,1,'13598674523',1);
-- å¦‚æžœè¯¥å­—æ®µæœ‰é»˜è®¤å€¼ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ DEFAULT ä»£æ›¿

-- å¦‚æžœè¦å¢žåŠ å¤šæ¡æ•°æ®ï¼Œæ€Žä¹ˆå†™ï¼Ÿ

INSERT INTO `test`.`student`(name,age,gender,phone,classid) 
-- åŽé¢å¢žåŠ çš„æ•°æ®ï¼Œè¯­å¥åŽä½¿ç”¨é€—å·`,`æ¢è¡Œåˆ†å‰²ï¼Œç›´åˆ°ç”¨åˆ†å·`;`ç»“æŸ
VALUES('Kyle',25,1,'13598674523',1),
('Kein',26,2,'15778095634',2);
```

### ä¿®æ”¹

```sql
-- UPDATE `æ•°æ®åº“å`.`è¡¨å` SET `å­—æ®µå`='å€¼'
-- åŒæ ·ï¼Œ`æ•°æ®åº“å`å¯ä»¥çœç•¥ä¸å†™
UPDATE `test`.`student` SET `name`='Kate'
-- å‡å¦‚åªå†™äº†ðŸ‘†çš„è¯­å¥ï¼Œåˆ™è¡¨ç¤ºå°†è¯¥è¡¨ä¸­æ‰€æœ‰æ•°æ®çš„`name`å­—æ®µçš„å€¼éƒ½è®¾ç½®ä¸ºè¯¥å€¼ï¼Œè¯·å°å¿ƒ

-- WHERE æŸ¥è¯¢ç­›é€‰æ•°æ®çš„æ¡ä»¶;
-- åˆ™åªä¼šæ”¹åŠ¨æ»¡è¶³æ¡ä»¶çš„è®°å½•
WHERE classid=1;
```

### åˆ é™¤

```sql
-- DELETE FROM `æ•°æ®åº“å`.`è¡¨å`
DELETE FROM `test`.`student`
-- å‡å¦‚åªå†™äº†ðŸ‘†çš„è¯­å¥ï¼Œåˆ™è¡¨ç¤ºå°†è¯¥è¡¨ä¸­æ‰€æœ‰è®°å½•éƒ½åˆ é™¤ï¼Œè¯·å°å¿ƒ

-- WHERE æŸ¥è¯¢æ¡ä»¶;
-- åˆ™åªä¼šåˆ é™¤æ»¡è¶³æ¡ä»¶çš„è®°å½•
WHERE `name`='Kate';
```

### æŸ¥è¯¢

```sql
-- SELECT `å­—æ®µ` FROM `è¡¨å`;
SELECT `id` FROM `student`;

-- æ€Žä¹ˆæŸ¥è¯¢å¤šä¸ªå­—æ®µï¼Ÿç”¨`,`é€—å·å°†å­—æ®µåˆ†éš”
SELECT `id`, `name`, `age` FROM `student`;

-- `å­—æ®µå` AS 'åˆ«å' å¯ä»¥ç»™æŸä¸ªå­—æ®µå¢žåŠ ä¾¿äºŽé˜…è¯»çš„åˆ«å
SELECT `name` AS 'å§“å' FROM `student`;

-- * æ˜Ÿå·æŸ¥è¯¢æ‰€æœ‰çš„æ•°æ®ï¼ŒåŒæ ·å¯ä»¥ç”¨`,`é€—å·å¢žåŠ å…¶ä»–å­—æ®µåˆ—
SELECT * FROM `student`;

-- æˆ‘æƒ³å¯¹æŸ¥è¯¢çš„æŸä¸ªå­—æ®µçš„æ•°æ®å•ç‹¬åšä¸€äº›å®šåˆ¶åŒ–å¤„ç†ï¼Œæ€Žä¹ˆåšï¼Ÿ
SELECT
  `name`,
CASE `gender` WHEN 1 THEN 'ç”·' ELSE 'å¥³' END AS 'æ€§åˆ«',
-- ä¸Šé¢ä¸€è¡Œä¹Ÿå¯ä»¥å†™æˆ: CASE WHEN `gender`=1 THEN 'ç”·' ELSE 'å¥³' END AS 'æ€§åˆ«',
-- ä¸”æˆ‘ä¹Ÿå¯ä»¥æ˜¾ç¤ºåŽŸæ¥çš„`gender`å­—æ®µðŸ‘‡
  `gender`,

-- å¤šé‡åˆ¤æ–­æ˜¾ç¤º
CASE
    WHEN `score`>= 300.0 THEN 'èœé¸Ÿ'
    WHEN `score`>= 400.0 THEN 'å°ç™½'
    ELSE 'é«˜æ‰‹' 
  END AS 'åˆ†æ•°',
  `age`
FROM
  `student`;
```





# `MongoDB`



#### ç®€ä»‹

MongoDB æ˜¯ä¸€ä¸ªåŸºäºŽåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ï¼›

ç”± C++ è¯­è¨€ç¼–å†™ã€‚æ—¨åœ¨ä¸º Web åº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆï¼›

ä»‹äºŽå…³ç³»æ•°æ®åº“å’Œéžå…³ç³»æ•°æ®åº“ä¹‹é—´ï¼›



#### å®‰è£…

1. å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…å¹¶ä¸”è§£åŽ‹ï¼Œå°†è§£åŽ‹åŽçš„æ–‡ä»¶å‘½åä¸º`mongodb`ï¼›

2. æ‰“å¼€`Finder`è®¿è¾¾ï¼Œè¾“å…¥å¿«æ·é”®`commang + shift + g `å¿«åŽ»å‰å¾€æ–‡ä»¶å¤¹

   > `/usr/local`
   >
   > å°†`mongodb`æ–‡ä»¶å¤åˆ¶åˆ°è¯¥ç›®å½•ä¸‹ï¼›

3. æ·»åŠ çŽ¯å¢ƒå˜é‡

   > ç»ˆç«¯è¾“å…¥`sudo vi ./.bash_profile`
   >
   > è¾“å…¥ç”¨æˆ·å¯†ç ï¼›
   >
   > ç›®å‰å¤„äºŽæŸ¥çœ‹æ¨¡å¼ï¼Œä¸èƒ½ç¼–è¾‘ã€‚è¾“å…¥`i`ï¼Œè¿›å…¥insertæ¨¡å¼ï¼›
   >
   > `export PATH=/usr/local/mongodb/bin:$PATH`
   >
   > æŒ‰`ESC`é”®é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼›
   >
   > è¾“å…¥`:wq!`ä¿å­˜å¹¶é€€å‡ºçŽ¯å¢ƒå˜é‡ï¼›
   >
   > ç»ˆç«¯è¾“å…¥`source ./.bash_profile`ï¼Œè®©çŽ¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼›
   >
   > ç»ˆç«¯è¾“å…¥`echo $PATH`ï¼ŒæŸ¥çœ‹çŽ¯å¢ƒå˜é‡ï¼›

4. åˆ›å»ºæ—¥å¿—åŠæ•°æ®å­˜æ”¾çš„ç›®å½•

   * åœ¨`/usr/local/mongodb`ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª`data`ç›®å½•ï¼›ç„¶åŽåœ¨`data`ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª`db`ç›®å½•;

     ```shell
     sudo mongod --dbpath=/usr/local/mongodb/data
     ```

5. å¯åŠ¨å’Œå…³é—­

   > ```shell
   > # å¯åŠ¨ï¼šè¾“å…¥ mongod + enter(å›žè½¦é”®)
   > mongod
   > 
   > # å…³é—­ï¼šè¾“å…¥ Control + C
   > control + c
   > ```

1. è¿žæŽ¥å’Œæ–­å¼€

   > ```shell
   > # å¯åŠ¨ mongodb æ•°æ®åº“åŽï¼Œæ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£ï¼›
   > # è¾“å…¥ mongo
   > mongo
   > 
   > # æ–­å¼€ï¼šè¾“å…¥ exit + enter(å›žè½¦é”®)
   > exit
   > ```





## åŸºæœ¬å‘½ä»¤



#### æŸ¥çœ‹æ•°æ®åº“

> ```shell
> # æŸ¥çœ‹æ˜¾ç¤ºæ‰€æœ‰çš„æ•°æ®åº“ï¼›
> show dbs
> 
> # æŸ¥çœ‹å½“å‰æ“ä½œçš„æ•°æ®åº“ï¼›
> db
> ```



#### åˆ‡æ¢æ•°æ®åº“

> ```shell
> # åˆ‡æ¢åˆ°æŒ‡å®šçš„æ•°æ®åº“ï¼›
> # å¦‚æžœæ²¡æœ‰è¯¥åç§°çš„æ•°æ®åº“ï¼Œåˆ™ä¼šæ–°å»ºä¸€ä¸ªï¼›
> use databaseName
> ```





## åŸºæœ¬æ¦‚å¿µ

> MongoDB ä¸­å¯ä»¥æœ‰å¤šä¸ªæ•°æ®åº“ï¼›
>
> ä¸€ä¸ªæ•°æ®åº“ä¸­å¯ä»¥æœ‰å¤šä¸ªé›†åˆï¼ˆè¡¨ï¼‰ï¼›
>
> ä¸€ä¸ªé›†åˆä¸­å¯ä»¥æœ‰å¤šä¸ªæ–‡æ¡£ï¼ˆè¡¨è®°å½•ï¼‰
>
> æ–‡æ¡£ç»“æž„å¾ˆçµæ´»ï¼Œæ²¡æœ‰é™åˆ¶ï¼›
>
> å½“è¦å†™å…¥æ•°æ®æ—¶ï¼Œåªéœ€è¦æŒ‡å®šå¾€å“ªä¸ªæ•°æ®åº“ä¸­çš„å“ªä¸ªé›†åˆè¿›è¡Œæ“ä½œï¼›
>
> MongoDB ä¼šè‡ªåŠ¨å®Œæˆå»ºåº“å»ºè¡¨ï¼›
>
> ```json
> {
>     "QQ":{
>        "user":[
>          {
>            "name":"Kein","age":"23","gender":"female"
>          },
>          {
>            "name":"Zoukai","age":"22","gender":"male"
>          },
>          {
>            "name":"MuYin","age":"1","gender":"female"
>          }
>        ],
>        "product":[
>          {
>            "phone":"Apple","model":"12","color":"black"
>          },
>          {
>            "phone":"Honor","model":"4s","color":"white"
>          },
>          {
>            "phone":"Vivo","model":"8","color":"pink"
>          }
>        ]
>     },
>     "Wechat":{
>        // QQã€Wechatã€TIM éƒ½æ˜¯æ•°æ®åº“ï¼›
>        // QQ æ•°æ®åº“ä¸­ï¼Œå­˜æ”¾ç€ userã€product ä¸¤ä¸ªé›†åˆï¼ˆè¡¨ï¼‰ï¼›
>        // userã€product ä¸¤ä¸ªé›†åˆä¸­éƒ½å­˜æ”¾åˆ™ç€è‹¥å¹²ä¸ªæ–‡æ¡£ä¿¡æ¯ï¼ˆè¡¨è®°å½•ï¼‰ï¼›
>     },
>     "TIM":{
>     
>     }
> }
> ```





## åœ¨Nodeä¸­æ“ä½œmongodb

> [mongodbæ¨¡å—å®˜æ–¹æŒ‡å—](https://www.npmjs.com/package/mongodb)
>
> [mongooseç¬¬ä¸‰æ–¹æ¨¡å—æŒ‡å—](https://mongoosejs.com)



#### å®˜æ–¹æ¨¡å—åŒ…

> ```shell
> npm install mongodb --save
> ```



#### mongoose

> åŸºäºŽ mongodb å®˜æ–¹æ¨¡å—åŒ…å¼€å‘çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼›



###### å®‰è£…

> ```shell
> npm install mongoose --save
> ```



###### è®¾è®¡é›†åˆç»“æž„

> ```javascript
> // åŠ è½½ mongoose ç¬¬ä¸‰æ–¹æ¨¡å—ï¼›
> const mongoose = require('mongoose');
> var Schema = mongoose.Schema;
> // è¿žæŽ¥æœ¬åœ° MongoDB æ•°æ®åº“ï¼›
> // test æ•°æ®åº“ä¸éœ€è¦å­˜åœ¨ï¼Œå½“å†™å…¥ç¬¬ä¸€æ¡æ•°æ®åŽå°±ä¼šè¢«è‡ªåŠ¨åˆ›å»ºå‡ºæ¥ï¼›
> mongoose.connect('mongodb://localhost:27017/test');
> 
> // è®¾è®¡é›†åˆç»“æž„ï¼ˆè¡¨ç»“æž„ï¼‰ï¼Œç»“æž„æ˜¯é€šè¿‡SchemaæŽ¥å£å®šä¹‰çš„;
> // å­—æ®µåç§°å°±æ˜¯è¡¨ç»“æž„ä¸­çš„å±žæ€§åç§°ï¼›
> // çº¦æŸæ•°æ®ï¼šä¸ºäº†ä¿è¯æ•°æ®çš„ç»Ÿä¸€æ€§å’Œå®Œæ•´æ€§ï¼›
> var dataSchema = new Schema({
>   username: {
>     type: String,
>     required: true // è¯¥å±žæ€§ä¸ºå¿…é¡»é¡¹ï¼›
>   },
>   password: {
>     type: String,
>     required: true
>   },
>   email: {
>     type: String,
>     required: false // è¯¥å±žæ€§ä¸ºéžå¿…é¡»é¡¹ï¼›
>   }
> })
> 
> // å°†é›†åˆç»“æž„ï¼ˆè¡¨ç»“æž„ï¼‰å‘å¸ƒä¸ºæ¨¡åž‹ï¼›
> // mongoose.model() æ–¹æ³•ç”¨æ¥å°†ä¸€ä¸ªè¡¨ç»“æž„å‘å¸ƒä¸º model ï¼›
> // æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼šä¼ å…¥ä¸€ä¸ªé¦–å­—æ¯å¤§å†™çš„å•æ•°åè¯ï¼›
> // mogoose ä¼šè‡ªåŠ¨ç”Ÿæˆ å°å†™å¤æ•° å½¢å¼çš„ é›†åˆï¼ˆè¡¨ï¼‰åç§°ï¼›
> // è¿™é‡Œçš„ Data ä¼šå˜æˆ datas é›†åˆåç§°ï¼›
> 
> // æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼šSchema é›†åˆï¼ˆè¡¨ï¼‰ç»“æž„ï¼›
> 
> // mongoose.model() æ–¹æ³•çš„è¿”å›žå€¼ï¼šæ¨¡åž‹æž„é€ å‡½æ•°ï¼›
> var Data = mongoose.model('Data', dataSchema);
> 
> // æœ‰äº†æ¨¡åž‹æž„é€ å‡½æ•°åŽï¼Œå°±å¯ä»¥è¿›è¡Œå¢žåˆ æ”¹æŸ¥æ“ä½œï¼›
> ```



###### å¢žåŠ æ•°æ®

> ```javascript
> // åœ¨ datas é›†åˆé‡Œé¢å¢žåŠ ä¸€æ¡æ–‡æ¡£ä¿¡æ¯ï¼ˆè¡¨è®°å½•ï¼‰ï¼›
> var own = new Data({
>   username: 'Kein',
>   password: '1314',
>   email: '2312197273@qq.com'
> })
> 
> // æ•°æ®æŒä¹…åŒ–ï¼ˆä¿å­˜ï¼‰ï¼›
> own.save(function(error, data) {
>   if (error) {
>     console.log('data saving failure');
>   } else {
>     console.log(data);
>   }
> });
> ```



###### æŸ¥è¯¢æ•°æ®

> ```javascript
> // æŸ¥è¯¢é›†åˆé‡Œçš„æ‰€æœ‰æ–‡æ¡£ä¿¡æ¯ï¼ˆè¡¨è®°å½•ï¼‰ï¼›
> Data.find(function(error, result) {
> 	if (error) {
> 		console.log('finding failure');
> 	} else {
> 		console.log(result);
> 	}
> })
> 
> //æŒ‰æ¡ä»¶æŸ¥è¯¢ï¼›
> Data.find({
> // æ¡ä»¶ä¸ºä¸€ä¸ªå¯¹è±¡ï¼›
> // æ­¤å¤„æŸ¥æ‰¾ username ä¸º ZouKai çš„æ–‡æ¡£ä¿¡æ¯ï¼ˆè¡¨è®°å½•ï¼‰
> 	username: "ZouKai"
> }, function(error, result) {
> 	if (error) {
> 		console.log('finding failure');
> 	} else {
> 		console.log(result);
> 	}
> })
> 
> // ä»¥ä¸Šæ–¹æ³•è¿”å›žçš„éƒ½æ˜¯ä¸€ä¸ªæ•°ç»„ï¼›
> 
> // æŒ‰ _id æŸ¥æ‰¾æ•°æ®ï¼›
> Data.findById(objectID,function(error,result){
> if (error) {
> 		console.log('finding failure');
> 	} else {
> 		console.log(result);
> 	}
> })
> 
> // è¯¥æ–¹æ³•è¿”å›žçš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼›
> //æŒ‰æ¡ä»¶æŸ¥è¯¢ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€æ¡è®°å½•ï¼›
> Data.findOne({
> 	username: "ZouKai"
> }, function(error, result) {
> 	if (error) {
> 		console.log('finding failure');
> 	} else {
> 		console.log(result);
> 	}
> })
> ```



###### åˆ é™¤æ•°æ®

> ```javascript
> // æŒ‰æ¡ä»¶åˆ é™¤é›†åˆé‡Œçš„æ–‡æ¡£ä¿¡æ¯ï¼ˆè¡¨è®°å½•ï¼‰ï¼›
> Data.remove({
> 	username: "ZouKai"
> }, function(error, result) {
> 	if (error) {
> 		console.log('delete failure');
> 	} else {
> 		console.log('delete success');
> 	}
> })
> ```



###### æ›´æ–°æ•°æ®

> ```javascript
> // æ ¹æ® id æ›´æ–°æŸæ¡æ–‡æ¡£ä¿¡æ¯ï¼ˆè¡¨è®°å½•ï¼‰çš„æ•°æ®ï¼›
> Data.findByIdAndUpdate('61a0d7f4dc575ee64b3e31c4', {
> 	password: '0929',
> 	username: 'MuYi'
> }, function(error, result) {
> 	if (error) {
> 		console.log('update failure');
> 	} else {
> 		console.log('update success');
> 	}
> })
> ```